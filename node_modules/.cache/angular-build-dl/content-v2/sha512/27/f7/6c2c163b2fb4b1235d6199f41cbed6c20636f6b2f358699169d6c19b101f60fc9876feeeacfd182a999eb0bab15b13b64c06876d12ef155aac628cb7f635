(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{xhH8:function(t,e,i){"use strict";i.r(e),i.d(e,"MySpacePageModule",function(){return U});var a=i("ofXK"),s=i("tyNb"),r=i("TEn/"),c=i("nRLJ"),n=i("Tfoj"),o=i("dWgT"),b=i("/YVT"),h=i("l9xV"),p=i("4qs/"),d=i("ksD8"),v=i("0/kf"),u=i("T7yn"),l=i("UHEk"),y=i("sWve"),g=i("n1ax"),f=i("YEJG"),_=i("mrSG"),I=i("pcCU"),m=i("vGT6"),T=i("1G5W"),O=i("fXoL"),S=i("y7ii"),j=i("xSju"),w=i("Ppwi"),A=i("iMrC"),D=i("Pghi"),k=i("SIl3"),E=i("GFOT"),M=i("NvSi"),R=i("yoFs");function C(t,e){if(1&t&&O.Kb(0,"app-no-data",13),2&t){const t=O.Yb();O.bc("activity",t.noDataActivity)("reviewer",t.noDataReview)("text",t.stringKey.NO_DATA)}}function K(t,e){if(1&t){const t=O.Pb();O.Ob(0,"ion-card"),O.Ob(1,"app-activity-short-view",15),O.Wb("click",function(){O.gc(t);const i=e.$implicit;return O.Yb(2).openActivityOptions(i)}),O.Nb(),O.Nb()}if(2&t){const t=e.$implicit;O.zb(1),O.bc("activity",t)}}function N(t,e){if(1&t&&(O.Mb(0),O.kc(1,K,2,1,"ion-card",14),O.Lb()),2&t){const t=O.Yb();O.zb(1),O.bc("ngForOf",t.activities)}}const Y=[{path:"",component:(()=>{class t extends I.a{constructor(t,e,i,a,s){super(t),this.localStorageService=e,this.projectActivityService=i,this.loadingService=a,this.alertService=s,this._hasData=!1}set breadCrumb(t){this._breadCrumb=t}get breadCrumb(){return this._breadCrumb}set hasData(t){this._hasData=t}get hasData(){return this._hasData}set activities(t){this._activities=t}get activities(){return this._activities}get pageTitle(){let t;switch(this._mySpaceType){case"activity":t=this.stringKey.MY_ACTIVITY;break;case"review":t=this.stringKey.MY_REVIEW}return t}get pageInfo(){let t;switch(this._mySpaceType){case"activity":t=this.stringKey.ACTIVITY_INFO;break;case"review":t=this.stringKey.ACTIVITY_REVIEW_INFO}return t}get noDataActivity(){return"activity"==this._mySpaceType}get noDataReview(){return"review"==this._mySpaceType}activeUserId(){return Object(_.a)(this,void 0,void 0,function*(){this.localStorageService.getActiveUserId().pipe(Object(T.a)(this.unsubscribe)).subscribe(t=>{this._loggedInUser=t})})}ngOnInit(){this.activeUserId(),this._projectId=this.activatedRoute.snapshot.paramMap.get("projectId"),this._mySpaceType=this.activatedRoute.snapshot.paramMap.get("spaceType")}ionViewDidEnter(){this.loadData()}ngOnDestroy(){super.ngOnDestroy()}generateBreadcrumb(){var t;return Object(_.a)(this,void 0,void 0,function*(){let e=null===(t=this._projectActivityModel.projectDetails)||void 0===t?void 0:t.projectName;switch(this._mySpaceType){case"activity":this._breadCrumb=[e,this.stringKey.MY_ACTIVITY];break;case"review":this._breadCrumb=[e,this.stringKey.MY_REVIEW]}})}loadData(){return Object(_.a)(this,void 0,void 0,function*(){this.loadingService.present(`${m.a.API_REQUEST_MESSAGE_1}`),this.projectActivityService.getProjectMySpace({projectId:this._projectId,userId:this._loggedInUser,assigneeUserId:this._loggedInUser,reviewerUserId:this._loggedInUser},this._mySpaceType).pipe(Object(T.a)(this.unsubscribe)).subscribe(t=>Object(_.a)(this,void 0,void 0,function*(){yield this.loadingService.dismiss(),t.success&&(this._projectActivityModel=t.data,yield this.generateBreadcrumb(),this._projectActivityModel.projectActivities.success?(this._activities=this._projectActivityModel.projectActivities.data,this._hasData=!0):this._hasData=!1)}))})}openActivityOptions(t){return Object(_.a)(this,void 0,void 0,function*(){this.router.navigate([t.activityId,"review"],{relativeTo:this.activatedRoute})})}}return t.\u0275fac=function(e){return new(e||t)(O.Jb(O.t),O.Jb(S.a),O.Jb(j.a),O.Jb(w.a),O.Jb(A.a))},t.\u0275cmp=O.Db({type:t,selectors:[["project-my-space"]],features:[O.wb],decls:17,vars:8,consts:[[3,"appScrollTracker"],["color","primary"],["slot","start"],["slot","end",3,"click"],["slot","start",3,"src"],["scrollEvents","true"],["scrollArea",""],[3,"title","info"],[3,"crumbs"],["slot","fixed",3,"ionRefresh"],[3,"activity","reviewer","text",4,"ngIf"],[4,"ngIf"],["id","dum-height"],[3,"activity","reviewer","text"],[4,"ngFor","ngForOf"],[3,"activity","click"]],template:function(t,e){if(1&t&&(O.Ob(0,"ion-header",0),O.Ob(1,"ion-toolbar",1),O.Ob(2,"ion-title"),O.lc(3),O.Nb(),O.Ob(4,"ion-buttons",2),O.Kb(5,"ion-menu-button"),O.Nb(),O.Ob(6,"ion-buttons",3),O.Wb("click",function(){return e.loadData()}),O.Kb(7,"ion-icon",4),O.Nb(),O.Nb(),O.Nb(),O.Ob(8,"ion-content",5,6),O.Kb(10,"app-page-info-title",7),O.Kb(11,"app-breadcrumb",8),O.Ob(12,"ion-refresher",9),O.Wb("ionRefresh",function(t){return e.doRefresh(t)}),O.Kb(13,"ion-refresher-content"),O.Nb(),O.kc(14,C,1,3,"app-no-data",10),O.kc(15,N,2,1,"ng-container",11),O.Kb(16,"div",12),O.Nb()),2&t){const t=O.fc(9);O.bc("appScrollTracker",t),O.zb(3),O.nc(" ",e.pageTitle," "),O.zb(4),O.bc("src",e.stringKey.ICON_REFRESH),O.zb(3),O.bc("title",e.pageTitle)("info",e.pageInfo),O.zb(1),O.bc("crumbs",e.breadCrumb),O.zb(3),O.bc("ngIf",!e.hasData),O.zb(1),O.bc("ngIf",e.hasData)}},directives:[r.u,D.a,r.Q,r.O,r.k,r.B,r.v,r.o,k.a,E.a,r.F,r.G,a.j,M.a,a.i,r.l,R.a],styles:[""]}),t})()},{path:":activityId/review",loadChildren:()=>Promise.all([i.e(7),i.e(6)]).then(i.bind(null,"Pmid")).then(t=>t.ProjectActivityReviewPageModule)}];let U=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=O.Hb({type:t}),t.\u0275inj=O.Gb({imports:[[a.b,r.R,f.a,h.a,b.a,n.a,d.a,g.a,v.a,u.a,l.a,y.a,o.a,p.a,c.a,s.k.forChild(Y)]]}),t})()}}]);