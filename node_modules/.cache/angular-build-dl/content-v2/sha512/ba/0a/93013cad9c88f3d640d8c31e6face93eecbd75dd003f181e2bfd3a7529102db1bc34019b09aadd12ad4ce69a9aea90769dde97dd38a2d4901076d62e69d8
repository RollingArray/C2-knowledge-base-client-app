!function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e,i,r){return(t="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}(e,t);if(r){var n=Object.getOwnPropertyDescriptor(r,t);return n.get?n.get.call(i):n.value}})(e,i,r||e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var i,r=a(e);if(t){var c=a(this).constructor;i=Reflect.construct(r,arguments,c)}else i=r.apply(this,arguments);return n(this,i)}}function n(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{YinQ:function(e,t,i){"use strict";i.d(t,"a",function(){return r});var r=function(e){return e.project="Project",e.sprint="Sprint",e.member="Member",e.administrator="Administrator",e.reviewer="Reviewer",e.goal="Goal",e.measurementType="Measurement Type",e}({})},fGi1:function(n,c,o){"use strict";o.d(c,"a",function(){return J});var s=o("mrSG"),u=o("fXoL"),l=o("Wbko"),b=o("ZFsI"),p=o("1G5W"),d=o("tUwt"),h=o("YinQ"),m=o("iMrC"),v=o("xSju"),y=o("dfv2"),f=o("Ppwi"),g=o("TEn/"),O=o("Pghi"),N=o("SIl3"),I=o("3Pt+"),_=o("ofXK"),E=o("wCMH"),T=o("gtxo"),R=["dropSelector"],A=["dropSelectorBackdrop"],V=["activityMeasurementTypeDropSelector"];function M(e,t){if(1&e&&(u.Ob(0,"ion-card",33),u.Ob(1,"ion-item",33),u.Kb(2,"ion-icon",34),u.lc(3),u.Nb(),u.Nb()),2&e){var i=u.Yb();u.zb(2),u.bc("src",i.stringKey.ICON_WARNING),u.zb(1),u.nc(" ",i.stringKey.FORM_VALIDATION_ACTIVITY," ")}}function C(e,t){if(1&e&&(u.Ob(0,"ion-card",33),u.Ob(1,"ion-item",33),u.Kb(2,"ion-icon",34),u.lc(3),u.Nb(),u.Nb()),2&e){var i=u.Yb();u.zb(2),u.bc("src",i.stringKey.ICON_WARNING),u.zb(1),u.nc(" ",i.stringKey.FORM_VALIDATION_ACTIVITY_RESULT_TYPE," ")}}function x(e,t){if(1&e&&u.Kb(0,"app-panel-header",35),2&e){var i=u.Yb();u.bc("panelTitle",i.selectedActivityMeasurementType)("panelIcon",i.stringKey.ICON_SELECT)("panelColor",i.stringKey.COLOR_SUCCESS)("isEventRequired",!1)}}function k(e,t){if(1&e&&(u.Ob(0,"span"),u.lc(1),u.Nb()),2&e){var i=u.Yb(2);u.zb(1),u.mc(i.stringKey.FORM_INFO_CRITERIA_POOR_VALUE)}}function K(e,t){if(1&e&&(u.Ob(0,"span"),u.lc(1),u.Nb()),2&e){var i=u.Yb(2);u.zb(1),u.mc(i.stringKey.FORM_INFO_CRITERIA_POOR_INVERSE_VALUE)}}function S(e,t){if(1&e&&(u.Ob(0,"ion-card",33),u.Ob(1,"ion-item",33),u.Kb(2,"ion-icon",34),u.lc(3),u.Nb(),u.Nb()),2&e){var i=u.Yb(2);u.zb(2),u.bc("src",i.stringKey.ICON_WARNING),u.zb(1),u.nc(" ",i.stringKey.FORM_VALIDATION_NUM," ")}}function z(e,t){if(1&e&&(u.Ob(0,"span"),u.lc(1),u.Nb()),2&e){var i=u.Yb(2);u.zb(1),u.mc(i.stringKey.FORM_INFO_CRITERIA_IMPROVEMENT_VALUE)}}function P(e,t){if(1&e&&(u.Ob(0,"span"),u.lc(1),u.Nb()),2&e){var i=u.Yb(2);u.zb(1),u.mc(i.stringKey.FORM_INFO_CRITERIA_IMPROVEMENT_INVERSE_VALUE)}}function D(e,t){if(1&e&&(u.Ob(0,"ion-card",33),u.Ob(1,"ion-item",33),u.Kb(2,"ion-icon",34),u.lc(3),u.Nb(),u.Nb()),2&e){var i=u.Yb(2);u.zb(2),u.bc("src",i.stringKey.ICON_WARNING),u.zb(1),u.nc(" ",i.stringKey.FORM_VALIDATION_NUM," ")}}function w(e,t){if(1&e&&(u.Ob(0,"span"),u.lc(1),u.Nb()),2&e){var i=u.Yb(2);u.zb(1),u.mc(i.stringKey.FORM_INFO_CRITERIA_EXPECTATION_VALUE)}}function F(e,t){if(1&e&&(u.Ob(0,"span"),u.lc(1),u.Nb()),2&e){var i=u.Yb(2);u.zb(1),u.mc(i.stringKey.FORM_INFO_CRITERIA_EXPECTATION_INVERSE_VALUE)}}function B(e,t){if(1&e&&(u.Ob(0,"ion-card",33),u.Ob(1,"ion-item",33),u.Kb(2,"ion-icon",34),u.lc(3),u.Nb(),u.Nb()),2&e){var i=u.Yb(2);u.zb(2),u.bc("src",i.stringKey.ICON_WARNING),u.zb(1),u.nc(" ",i.stringKey.FORM_VALIDATION_NUM," ")}}function Y(e,t){if(1&e&&(u.Ob(0,"span"),u.lc(1),u.Nb()),2&e){var i=u.Yb(2);u.zb(1),u.mc(i.stringKey.FORM_INFO_CRITERIA_EXCEED_VALUE)}}function L(e,t){if(1&e&&(u.Ob(0,"span"),u.lc(1),u.Nb()),2&e){var i=u.Yb(2);u.zb(1),u.mc(i.stringKey.FORM_INFO_CRITERIA_EXCEED_INVERSE_VALUE)}}function U(e,t){if(1&e&&(u.Ob(0,"ion-card",33),u.Ob(1,"ion-item",33),u.Kb(2,"ion-icon",34),u.lc(3),u.Nb(),u.Nb()),2&e){var i=u.Yb(2);u.zb(2),u.bc("src",i.stringKey.ICON_WARNING),u.zb(1),u.nc(" ",i.stringKey.FORM_VALIDATION_NUM," ")}}function G(e,t){if(1&e&&(u.Ob(0,"span"),u.lc(1),u.Nb()),2&e){var i=u.Yb(2);u.zb(1),u.mc(i.stringKey.FORM_INFO_CRITERIA_OUTSTANDING_VALUE)}}function W(e,t){if(1&e&&(u.Ob(0,"span"),u.lc(1),u.Nb()),2&e){var i=u.Yb(2);u.zb(1),u.mc(i.stringKey.FORM_INFO_CRITERIA_OUTSTANDING_INVERSE_VALUE)}}function H(e,t){if(1&e&&(u.Ob(0,"ion-card",33),u.Ob(1,"ion-item",33),u.Kb(2,"ion-icon",34),u.lc(3),u.Nb(),u.Nb()),2&e){var i=u.Yb(2);u.zb(2),u.bc("src",i.stringKey.ICON_WARNING),u.zb(1),u.nc(" ",i.stringKey.FORM_VALIDATION_NUM," ")}}var j=function(){return{standalone:!0}};function q(e,t){if(1&e){var i=u.Pb();u.Ob(0,"div"),u.Ob(1,"ion-card",36),u.Ob(2,"ion-item",37),u.Ob(3,"p"),u.lc(4),u.Nb(),u.Nb(),u.Ob(5,"ion-item",36),u.Ob(6,"ion-toggle",38),u.Wb("ngModelChange",function(e){return u.gc(i),u.Yb().characteristicsHigherBetter=e})("ionChange",function(e){return u.gc(i),u.Yb().onToggleBtnChange(e)}),u.Nb(),u.Nb(),u.Nb(),u.Ob(7,"ion-card",12),u.Ob(8,"ion-item",13),u.Kb(9,"ion-icon",14),u.kc(10,k,2,1,"span",23),u.kc(11,K,2,1,"span",23),u.Nb(),u.Nb(),u.Ob(12,"ion-card",15),u.Ob(13,"ion-item",15),u.Kb(14,"ion-input",39),u.Nb(),u.kc(15,S,4,2,"ion-card",17),u.Nb(),u.Ob(16,"ion-card",12),u.Ob(17,"ion-item",13),u.Kb(18,"ion-icon",14),u.kc(19,z,2,1,"span",23),u.kc(20,P,2,1,"span",23),u.Nb(),u.Nb(),u.Ob(21,"ion-card",15),u.Ob(22,"ion-item",15),u.Kb(23,"ion-input",40),u.Nb(),u.kc(24,D,4,2,"ion-card",17),u.Nb(),u.Ob(25,"ion-card",12),u.Ob(26,"ion-item",13),u.Kb(27,"ion-icon",14),u.kc(28,w,2,1,"span",23),u.kc(29,F,2,1,"span",23),u.Nb(),u.Nb(),u.Ob(30,"ion-card",15),u.Ob(31,"ion-item",15),u.Kb(32,"ion-input",41),u.Nb(),u.kc(33,B,4,2,"ion-card",17),u.Nb(),u.Ob(34,"ion-card",12),u.Ob(35,"ion-item",13),u.Kb(36,"ion-icon",14),u.kc(37,Y,2,1,"span",23),u.kc(38,L,2,1,"span",23),u.Nb(),u.Nb(),u.Ob(39,"ion-card",15),u.Ob(40,"ion-item",15),u.Kb(41,"ion-input",42),u.Nb(),u.kc(42,U,4,2,"ion-card",17),u.Nb(),u.Ob(43,"ion-card",12),u.Ob(44,"ion-item",13),u.Kb(45,"ion-icon",14),u.kc(46,G,2,1,"span",23),u.kc(47,W,2,1,"span",23),u.Nb(),u.Nb(),u.Ob(48,"ion-card",15),u.Ob(49,"ion-item",15),u.Kb(50,"ion-input",43),u.Nb(),u.kc(51,H,4,2,"ion-card",17),u.Nb(),u.Nb()}if(2&e){var r=u.Yb();u.zb(4),u.nc(" ",r.stringKey.CRITERIA_CHARACTERISTICS_HIGHER_BETTER_INFO," "),u.zb(2),u.bc("ngModel",r.characteristicsHigherBetter)("ngModelOptions",u.cc(28,j)),u.zb(3),u.bc("src",r.stringKey.ICON_CREATE),u.zb(1),u.bc("ngIf",r.characteristicsHigherBetter),u.zb(1),u.bc("ngIf",!r.characteristicsHigherBetter),u.zb(3),u.bc("placeholder",r.stringKey.FORM_PLACEHOLDER_NUM),u.zb(1),u.bc("ngIf",r.criteriaPoorValue.invalid&&r.criteriaPoorValue.touched),u.zb(3),u.bc("src",r.stringKey.ICON_CREATE),u.zb(1),u.bc("ngIf",r.characteristicsHigherBetter),u.zb(1),u.bc("ngIf",!r.characteristicsHigherBetter),u.zb(3),u.bc("placeholder",r.stringKey.FORM_PLACEHOLDER_NUM),u.zb(1),u.bc("ngIf",r.criteriaImprovementValue.invalid&&r.criteriaImprovementValue.touched),u.zb(3),u.bc("src",r.stringKey.ICON_CREATE),u.zb(1),u.bc("ngIf",r.characteristicsHigherBetter),u.zb(1),u.bc("ngIf",!r.characteristicsHigherBetter),u.zb(3),u.bc("placeholder",r.stringKey.FORM_PLACEHOLDER_NUM),u.zb(1),u.bc("ngIf",r.criteriaExpectationValue.invalid&&r.criteriaExpectationValue.touched),u.zb(3),u.bc("src",r.stringKey.ICON_CREATE),u.zb(1),u.bc("ngIf",r.characteristicsHigherBetter),u.zb(1),u.bc("ngIf",!r.characteristicsHigherBetter),u.zb(3),u.bc("placeholder",r.stringKey.FORM_PLACEHOLDER_NUM),u.zb(1),u.bc("ngIf",r.criteriaExceedValue.invalid&&r.criteriaExceedValue.touched),u.zb(3),u.bc("src",r.stringKey.ICON_CREATE),u.zb(1),u.bc("ngIf",r.characteristicsHigherBetter),u.zb(1),u.bc("ngIf",!r.characteristicsHigherBetter),u.zb(3),u.bc("placeholder",r.stringKey.FORM_PLACEHOLDER_NUM),u.zb(1),u.bc("ngIf",r.criteriaOutstandingValue.invalid&&r.criteriaOutstandingValue.touched)}}var J=function(){var n=function(n){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(m,n);var c,o,u,l=r(m);function m(e,t,i,r,n,a,c){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),(o=l.call(this,e)).alertService=t,o.projectActivityService=i,o.projectService=r,o.loadingService=n,o.navParams=a,o.animationController=c,o._showNumScale=!1,o._activityWeightDelta=0,o._previousActivityWeightDelta=0,o._characteristicsHigherBetter=!0,o.activityMeasurementTypeEnum=d.a,o.moduleEnum=h.a,o._animationDuration=100,o._transitionHeight=-356,o._passedActivity=o.navParams.get("data"),o.buildFrom(),o}return c=m,(o=[{key:"dropSelectorTitle",get:function(){return this._dropSelectorTitle},set:function(e){this._dropSelectorTitle=e}},{key:"showNumScale",get:function(){return this._showNumScale},set:function(e){this._showNumScale=e}},{key:"characteristicsHigherBetter",get:function(){return this._characteristicsHigherBetter},set:function(e){this._characteristicsHigherBetter=e}},{key:"ngOnInit",value:function(){this.dropSelectorBackdrop.nativeElement.hidden=!0}},{key:"ngOnDestroy",value:function(){t(a(m.prototype),"ngOnDestroy",this).call(this)}},{key:"chooseTaskMeasurementType",value:function(e){this.selectedActivityMeasurementType=e,this.formGroup.controls.activityMeasurementType.setValue(e),e==d.a.Bool?(this._showNumScale=!1,this.formGroup.controls.criteriaPoorValue.setValue("0"),this.formGroup.controls.criteriaImprovementValue.setValue("0"),this.formGroup.controls.criteriaExpectationValue.setValue("0"),this.formGroup.controls.criteriaExceedValue.setValue("0"),this.formGroup.controls.criteriaOutstandingValue.setValue("100")):this._showNumScale=!0,this.closeDropSelector()}},{key:"setPassedValueToFrom",value:function(){var e=this.formGroup.value;e.activityName=this._passedActivity.activityName,e.activityWeight=this._passedActivity.activityWeight,e.activityMeasurementType=this._passedActivity.activityMeasurementType,e.activityResultType=this._passedActivity.activityResultType,e.criteriaPoorValue=this._passedActivity.criteriaPoorValue,e.criteriaImprovementValue=this._passedActivity.criteriaImprovementValue,e.criteriaExpectationValue=this._passedActivity.criteriaExpectationValue,e.criteriaExceedValue=this._passedActivity.criteriaExceedValue,e.criteriaOutstandingValue=this._passedActivity.criteriaOutstandingValue,this._passedActivity.activityMeasurementType&&this.chooseTaskMeasurementType(this._passedActivity.activityMeasurementType)}},{key:"buildFrom",value:function(){this.formGroup=this.formBuilder.group({activityName:[this._passedActivity.activityName,this.validators().compose([this.validators().required,this.validators().pattern(this.regex.ALPHANUMERIC_NAME_PATTERN)])],activityWeight:[this._passedActivity.activityWeight,this.validators().compose([this.validators().required,this.validators().pattern(this.regex.NUMBER_PATTERN)])],activityMeasurementType:[this._passedActivity.activityMeasurementType,this.validators().compose([this.validators().required])],activityResultType:[this._passedActivity.activityResultType,this.validators().compose([this.validators().required,this.validators().pattern(this.regex.ACTIVITY_RESULT_TYPE_PATTERN)])],criteriaPoorValue:[this._passedActivity.criteriaPoorValue,this.validators().compose([this.validators().required,this.validators().pattern(this.regex.NUMBER_PATTERN)])],criteriaImprovementValue:[this._passedActivity.criteriaImprovementValue,this.validators().compose([this.validators().required,this.validators().pattern(this.regex.NUMBER_PATTERN)])],criteriaExpectationValue:[this._passedActivity.criteriaExpectationValue,this.validators().compose([this.validators().required,this.validators().pattern(this.regex.NUMBER_PATTERN)])],criteriaExceedValue:[this._passedActivity.criteriaExceedValue,this.validators().compose([this.validators().required,this.validators().pattern(this.regex.NUMBER_PATTERN)])],criteriaOutstandingValue:[this._passedActivity.criteriaOutstandingValue,this.validators().compose([this.validators().required,this.validators().pattern(this.regex.NUMBER_PATTERN)])]}),this.setPassedValueToFrom()}},{key:"pageTitle",get:function(){var e;return this._passedActivity.operationType===b.a.Create?e=this.stringKey.CREATE_ACTIVITY:(e=this.stringKey.UPDATE_ACTIVITY,this._previousActivityWeightDelta=this._passedActivity.activityWeight),e}},{key:"calculateWeightDelta",value:function(e){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e-this._previousActivityWeightDelta);case 1:case"end":return t.stop()}},t,this)}))}},{key:"activityName",get:function(){return this.formGroup.get("activityName")}},{key:"activityWeight",get:function(){return this.formGroup.get("activityWeight")}},{key:"activityResultType",get:function(){return this.formGroup.get("activityResultType")}},{key:"activityMeasurementType",get:function(){return this.formGroup.get("activityMeasurementType")}},{key:"criteriaPoorValue",get:function(){return this.formGroup.get("criteriaPoorValue")}},{key:"criteriaImprovementValue",get:function(){return this.formGroup.get("criteriaImprovementValue")}},{key:"criteriaExpectationValue",get:function(){return this.formGroup.get("criteriaExpectationValue")}},{key:"criteriaExceedValue",get:function(){return this.formGroup.get("criteriaExceedValue")}},{key:"criteriaOutstandingValue",get:function(){return this.formGroup.get("criteriaOutstandingValue")}},{key:"submit",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.formGroup.invalid){e.next=5;break}return e.next=3,this.alertService.presentBasicAlert("".concat(this.stringKey.MANDATORY_FIELDS));case 3:e.next=11;break;case 5:if(this.selectedActivityMeasurementType!==d.a.Bool){e.next=10;break}return e.next=8,this.submitData();case 8:e.next=11;break;case 10:this._characteristicsHigherBetter?this.higherBetterValueValidation():this.lowerBetterValueValidation();case 11:case"end":return e.stop()}},e,this)}))}},{key:"higherBetterValueValidation",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.formGroup.value,!(parseInt(t.criteriaImprovementValue)>=parseInt(t.criteriaPoorValue)&&parseInt(t.criteriaImprovementValue)<parseInt(t.criteriaExpectationValue)&&parseInt(t.criteriaExpectationValue)>=parseInt(t.criteriaImprovementValue)&&parseInt(t.criteriaExpectationValue)<parseInt(t.criteriaExceedValue)&&parseInt(t.criteriaExceedValue)>=parseInt(t.criteriaExpectationValue)&&parseInt(t.criteriaExceedValue)<parseInt(t.criteriaOutstandingValue)&&parseInt(t.criteriaOutstandingValue)>=parseInt(t.criteriaExceedValue))){e.next=6;break}return e.next=4,this.submitData();case 4:e.next=8;break;case 6:return e.next=8,this.alertService.presentBasicAlert("".concat(this.stringKey.MANDATORY_MEASUREMENT_CRITERIA_RANGE));case 8:case"end":return e.stop()}},e,this)}))}},{key:"lowerBetterValueValidation",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.formGroup.value,!(parseInt(t.criteriaImprovementValue)<=parseInt(t.criteriaPoorValue)&&parseInt(t.criteriaImprovementValue)>parseInt(t.criteriaExpectationValue)&&parseInt(t.criteriaExpectationValue)<=parseInt(t.criteriaImprovementValue)&&parseInt(t.criteriaExpectationValue)>parseInt(t.criteriaExceedValue)&&parseInt(t.criteriaExceedValue)<=parseInt(t.criteriaExpectationValue)&&parseInt(t.criteriaExceedValue)>parseInt(t.criteriaOutstandingValue)&&parseInt(t.criteriaOutstandingValue)<=parseInt(t.criteriaExceedValue))){e.next=6;break}return e.next=4,this.submitData();case 4:e.next=8;break;case 6:return e.next=8,this.alertService.presentBasicAlert("".concat(this.stringKey.MANDATORY_MEASUREMENT_CRITERIA_RANGE));case 8:case"end":return e.stop()}},e,this)}))}},{key:"onToggleBtnChange",value:function(e){}},{key:"buildDataModelToPass",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.formGroup.value,e.t0=this._passedActivity.userId,e.t1=this._passedActivity.projectId,e.t2=this._passedActivity.sprintId,e.t3=this._passedActivity.assigneeUserId,e.t4=this._passedActivity.goalId,e.t5=this._passedActivity.activityId,e.t6=t.activityName,e.t7=t.activityWeight,e.next=11,this.calculateWeightDelta(t.activityWeight);case 11:return e.t8=e.sent,e.t9=this.selectedActivityMeasurementType,e.t10=t.activityResultType,e.t11=t.criteriaPoorValue,e.t12=t.criteriaImprovementValue,e.t13=t.criteriaExpectationValue,e.t14=t.criteriaExceedValue,e.t15=t.criteriaOutstandingValue,e.t16=this._characteristicsHigherBetter?1:0,e.t17=this._passedActivity.operationType,e.abrupt("return",{userId:e.t0,projectId:e.t1,sprintId:e.t2,assigneeUserId:e.t3,goalId:e.t4,activityId:e.t5,activityName:e.t6,activityWeight:e.t7,activityWeightDelta:e.t8,activityMeasurementType:e.t9,activityResultType:e.t10,criteriaPoorValue:e.t11,criteriaImprovementValue:e.t12,criteriaExpectationValue:e.t13,criteriaExceedValue:e.t14,criteriaOutstandingValue:e.t15,characteristicsHigherBetter:e.t16,operationType:e.t17});case 22:case"end":return e.stop()}},e,this)}))}},{key:"submitData",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingService.present("".concat(this.stringKey.API_REQUEST_MESSAGE_2)),e.next=3,this.buildDataModelToPass();case 3:t=e.sent,this.projectActivityService.projectActivityCrud(t).pipe(Object(p.a)(this.unsubscribe)).subscribe(function(e){return Object(s.a)(i,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadingService.dismiss();case 2:if(t.t0=e.success,!t.t0){t.next=8;break}return this._modalData={cancelled:!1,operationSubmitted:!0},t.next=7,this.presentToast(e.message);case 7:this.dismissModal();case 8:case"end":return t.stop()}},t,this)}))},function(e){i.loadingService.dismiss()});case 5:case"end":return e.stop()}},e,this)}))}},{key:"cancelModal",value:function(){this._modalData={cancelled:!0,operationSubmitted:!1},this.dismissModal()}},{key:"dismissModal",value:function(){var e=this;this.modalController.dismiss(this._modalData).then(function(){e.formGroup.reset()})}},{key:"openDropSelector",value:function(e){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.activeDropSelector(e),this.animationController.create().addElement(this.dropSelector.nativeElement).duration(this._animationDuration).fromTo("transform","translateY(0px)","translateY(".concat(this._transitionHeight,"px)")).play();case 1:case"end":return t.stop()}},t,this)}))}},{key:"activeDropSelector",value:function(e){switch(this.dropSelectorBackdrop.nativeElement.hidden=!1,e){case h.a.measurementType:this._dropSelectorTitle="".concat(this.stringKey.SELECT," ").concat(h.a.measurementType),this.activityMeasurementTypeDropSelector.nativeElement.hidden=!1}}},{key:"closeDropSelector",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.dropSelectorBackdrop.nativeElement.hidden=!0,this.animationController.create().addElement(this.dropSelector.nativeElement).duration(this._animationDuration).fromTo("transform","translateY(".concat(this._transitionHeight,"px)"),"translateY(0px)").play();case 1:case"end":return e.stop()}},e,this)}))}}])&&e(c.prototype,o),u&&e(c,u),m}(l.a);return n.\u0275fac=function(e){return new(e||n)(u.Jb(u.t),u.Jb(m.a),u.Jb(v.a),u.Jb(y.a),u.Jb(f.a),u.Jb(g.X),u.Jb(g.c))},n.\u0275cmp=u.Db({type:n,selectors:[["app-create-edit-project-activity"]],viewQuery:function(e,t){var i;(1&e&&(u.qc(R,3,u.m),u.qc(A,3,u.m),u.qc(V,3,u.m)),2&e)&&(u.ec(i=u.Xb())&&(t.dropSelector=i.first),u.ec(i=u.Xb())&&(t.dropSelectorBackdrop=i.first),u.ec(i=u.Xb())&&(t.activityMeasurementTypeDropSelector=i.first))},features:[u.wb],decls:75,vars:37,consts:[[3,"appScrollTracker"],["color","primary"],["slot","start"],["fill","solid","color","dark",3,"click"],["slot","end"],["lines","none","color","primary","scrollEvents","true"],["scrollArea",""],[3,"title","info"],["slot","fixed","vertical","bottom","horizontal","end"],["color","dark",3,"click"],[3,"src"],["color","primary","lines","none",3,"formGroup","ngSubmit"],["color","secondary"],["color","secondary","lines","none"],["slot","start",3,"src"],["lines","none","color","light"],["autocomplete","off","formControlName","activityName","type","text",3,"placeholder"],["color","warning",4,"ngIf"],["autocomplete","off","formControlName","activityResultType","type","text",3,"placeholder"],["formControlName","activityWeight","color","primary","min","1","max","100","step","1"],[1,"percentage"],["color","secondary",1,"selector",3,"click"],[3,"panelTitle","panelIcon","panelColor","isEventRequired",4,"ngIf"],[4,"ngIf"],["id","dum-height"],[1,"dropSelectorBackdrop",3,"click"],["dropSelectorBackdrop",""],[1,"dropSelector"],["dropSelector",""],["fill","outline",3,"click"],["activityMeasurementTypeDropSelector",""],[3,"panelTitle","panelIcon","panelColor","eventIcon","isEventRequired","event"],[3,"description"],["color","warning"],["color","danger","slot","start",3,"src"],[3,"panelTitle","panelIcon","panelColor","isEventRequired"],["color","senary"],["color","senary","lines","none"],[3,"ngModel","ngModelOptions","ngModelChange","ionChange"],["autocomplete","off","formControlName","criteriaPoorValue","type","text",3,"placeholder"],["autocomplete","off","formControlName","criteriaImprovementValue","type","text",3,"placeholder"],["autocomplete","off","formControlName","criteriaExpectationValue","type","text",3,"placeholder"],["autocomplete","off","formControlName","criteriaExceedValue","type","text",3,"placeholder"],["autocomplete","off","formControlName","criteriaOutstandingValue","type","text",3,"placeholder"]],template:function(e,t){if(1&e&&(u.Ob(0,"ion-header",0),u.Ob(1,"ion-toolbar",1),u.Ob(2,"ion-title"),u.lc(3),u.Nb(),u.Ob(4,"ion-buttons",2),u.Ob(5,"ion-button",3),u.Wb("click",function(){return t.cancelModal()}),u.lc(6),u.Nb(),u.Nb(),u.Ob(7,"ion-buttons",4),u.Ob(8,"ion-button",3),u.Wb("click",function(){return t.submit()}),u.lc(9),u.Nb(),u.Nb(),u.Nb(),u.Nb(),u.Ob(10,"ion-content",5,6),u.Kb(12,"app-page-info-title",7),u.Ob(13,"ion-fab",8),u.Ob(14,"ion-fab-button",9),u.Wb("click",function(){return t.submit()}),u.Kb(15,"ion-icon",10),u.Nb(),u.Nb(),u.Ob(16,"form",11),u.Wb("ngSubmit",function(){return t.submit()}),u.Ob(17,"ion-card",12),u.Ob(18,"p"),u.Ob(19,"ion-item",13),u.Kb(20,"ion-icon",14),u.lc(21),u.Nb(),u.Nb(),u.Ob(22,"ion-card",15),u.Ob(23,"ion-item",15),u.Kb(24,"ion-textarea",16),u.Nb(),u.kc(25,M,4,2,"ion-card",17),u.Nb(),u.Nb(),u.Ob(26,"ion-card",12),u.Ob(27,"p"),u.Ob(28,"ion-item",13),u.Kb(29,"ion-icon",14),u.lc(30),u.Nb(),u.Nb(),u.Ob(31,"ion-card",15),u.Ob(32,"ion-item",15),u.Kb(33,"ion-input",18),u.Nb(),u.kc(34,C,4,2,"ion-card",17),u.Nb(),u.Nb(),u.Ob(35,"ion-card",12),u.Ob(36,"p"),u.Ob(37,"ion-item",13),u.Kb(38,"ion-icon",14),u.lc(39),u.Nb(),u.Nb(),u.Ob(40,"ion-card",15),u.Ob(41,"ion-item",15),u.Ob(42,"ion-range",19),u.Ob(43,"ion-label",2),u.lc(44,"1"),u.Nb(),u.Ob(45,"ion-label",4),u.lc(46,"100"),u.Nb(),u.Nb(),u.Ob(47,"span",20),u.lc(48),u.Nb(),u.Nb(),u.Nb(),u.Nb(),u.Ob(49,"ion-card",21),u.Wb("click",function(){return t.openDropSelector(t.moduleEnum.measurementType)}),u.Ob(50,"ion-item",13),u.Kb(51,"ion-icon",14),u.lc(52),u.Nb(),u.kc(53,x,1,4,"app-panel-header",22),u.Nb(),u.kc(54,q,52,29,"div",23),u.Nb(),u.Kb(55,"div",24),u.Nb(),u.Ob(56,"div",25,26),u.Wb("click",function(){return t.closeDropSelector()}),u.Nb(),u.Ob(58,"div",27,28),u.Ob(60,"ion-header"),u.Ob(61,"ion-toolbar",1),u.Ob(62,"ion-title",2),u.lc(63),u.Nb(),u.Ob(64,"ion-buttons",4),u.Ob(65,"ion-button",29),u.Wb("click",function(){return t.closeDropSelector()}),u.lc(66),u.Nb(),u.Nb(),u.Nb(),u.Nb(),u.Ob(67,"ion-content",null,30),u.Ob(69,"ion-card"),u.Ob(70,"app-panel-header",31),u.Wb("event",function(){return t.chooseTaskMeasurementType(t.activityMeasurementTypeEnum.Num)}),u.Nb(),u.Kb(71,"app-custom-fields",32),u.Nb(),u.Ob(72,"ion-card"),u.Ob(73,"app-panel-header",31),u.Wb("event",function(){return t.chooseTaskMeasurementType(t.activityMeasurementTypeEnum.Bool)}),u.Nb(),u.Kb(74,"app-custom-fields",32),u.Nb(),u.Nb(),u.Nb()),2&e){var i=u.fc(11);u.bc("appScrollTracker",i),u.zb(3),u.nc(" ",t.pageTitle," "),u.zb(3),u.mc(t.stringKey.CANCEL),u.zb(3),u.mc(t.stringKey.SAVE),u.zb(3),u.bc("title",t.pageTitle)("info",t.stringKey.PROJECT_ACTIVITY_INFO),u.zb(3),u.bc("src",t.stringKey.ICON_SAVE),u.zb(1),u.bc("formGroup",t.formGroup),u.zb(4),u.bc("src",t.stringKey.ICON_CREATE),u.zb(1),u.nc(" ",t.stringKey.FORM_INFO_ACTIVITY," "),u.zb(3),u.bc("placeholder",t.stringKey.FORM_PLACEHOLDER_ACTIVITY),u.zb(1),u.bc("ngIf",t.activityName.invalid&&t.activityName.touched),u.zb(4),u.bc("src",t.stringKey.ICON_CREATE),u.zb(1),u.nc(" ",t.stringKey.FORM_INFO_ACTIVITY_RESULT_TYPE," "),u.zb(3),u.bc("placeholder",t.stringKey.FORM_PLACEHOLDER_ACTIVITY_RESULT_TYPE),u.zb(1),u.bc("ngIf",t.activityResultType.invalid&&t.activityResultType.touched),u.zb(4),u.bc("src",t.stringKey.ICON_SLIDER),u.zb(1),u.nc(" ",t.stringKey.FORM_INFO_ACTIVITY_WEIGHT," "),u.zb(9),u.nc("",t.activityWeight.value,"%"),u.zb(3),u.bc("src",t.stringKey.ICON_MULTI_SELECT),u.zb(1),u.nc(" ",t.stringKey.FORM_INFO_MEASUREMENT_TYPE," "),u.zb(1),u.bc("ngIf",t.selectedActivityMeasurementType),u.zb(1),u.bc("ngIf",t.showNumScale),u.zb(9),u.nc(" ",t.dropSelectorTitle," "),u.zb(3),u.mc(t.stringKey.CLOSE),u.zb(4),u.bc("panelTitle",t.activityMeasurementTypeEnum.Num)("panelIcon",t.stringKey.ICON_RIGHT_ARROW)("panelColor",t.stringKey.COLOR_PRIMARY)("eventIcon",t.stringKey.ICON_ACTIVATE)("isEventRequired",!0),u.zb(1),u.bc("description",t.stringKey.MEASUREMENT_TYPE_NUM_INFO),u.zb(2),u.bc("panelTitle",t.activityMeasurementTypeEnum.Bool)("panelIcon",t.stringKey.ICON_RIGHT_ARROW)("panelColor",t.stringKey.COLOR_PRIMARY)("eventIcon",t.stringKey.ICON_ACTIVATE)("isEventRequired",!0),u.zb(1),u.bc("description",t.stringKey.MEASUREMENT_TYPE_BOOL_INFO)}},directives:[g.u,O.a,g.Q,g.O,g.k,g.j,g.o,N.a,g.q,g.r,g.v,I.m,I.h,I.c,g.l,g.x,g.N,g.cb,I.g,I.b,_.j,g.w,g.E,g.bb,g.y,E.a,T.a,g.P,g.d,I.j],styles:[".dropSelectorBackdrop[_ngcontent-%COMP%]{position:fixed;width:100%;height:100%;background-color:var(--ion-color-primary);z-index:999;opacity:.6}.dropSelector[_ngcontent-%COMP%]{position:fixed;bottom:-300px;width:100%;height:300px;z-index:1000}p.capitalize[_ngcontent-%COMP%]{text-transform:capitalize}.percentage[_ngcontent-%COMP%]{color:var(--ion-color-dark);font-weight:700}"]}),n}()}}])}();