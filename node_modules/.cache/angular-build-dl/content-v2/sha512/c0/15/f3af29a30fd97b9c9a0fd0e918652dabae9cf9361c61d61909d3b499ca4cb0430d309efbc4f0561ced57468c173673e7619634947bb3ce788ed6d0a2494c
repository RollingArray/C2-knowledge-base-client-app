!function(){function e(t,i,r){return(e="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var n=Object.getOwnPropertyDescriptor(r,t);return n.get?n.get.call(i):n.value}})(t,i,r||t)}function t(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var i,r=c(e);if(t){var n=c(this).constructor;i=Reflect.construct(r,arguments,n)}else i=r.apply(this,arguments);return o(this,i)}}function o(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{Pmid:function(t,n,o){"use strict";o.r(n),o.d(n,"ProjectActivityReviewPageModule",function(){return Ze});var u,l,b,d,p=o("ofXK"),v=o("tyNb"),h=o("TEn/"),m=o("Tfoj"),f=o("dWgT"),g=o("YEJG"),y=o("4qs/"),O=o("T7yn"),R=o("UHEk"),I=o("fXoL"),_=((u=function e(){s(this,e)}).\u0275fac=function(e){return new(e||u)},u.\u0275mod=I.Hb({type:u}),u.\u0275inj=I.Gb({imports:[[p.b,g.a,h.R,O.a,R.a,y.a]]}),u),E=o("ksD8"),N=o("0/kf"),T=o("sWve"),w=((l=function e(){s(this,e)}).\u0275fac=function(e){return new(e||l)},l.\u0275mod=I.Hb({type:l}),l.\u0275inj=I.Gb({imports:[[p.b,g.a,h.R,O.a,R.a,y.a]]}),l),A=o("HsOq"),C=((b=function e(){s(this,e)}).\u0275fac=function(e){return new(e||b)},b.\u0275mod=I.Hb({type:b}),b.\u0275inj=I.Gb({imports:[[p.b,h.R,R.a,y.a,N.a,A.a,w]]}),b),k=o("mrSG"),S=o("ZFsI"),K=o("pcCU"),D=o("vGT6"),M=o("1G5W"),x=o("Wbko"),z=o("YinQ"),V=o("iMrC"),j=o("dfv2"),U=o("whyd"),P=o("9IC/"),L=o("tk/3"),Y=o("y7ii"),H=o("XEr0"),G=((d=function(e){r(n,e);var t=a(n);function n(e,i,r,a){return s(this,n),t.call(this,e,i,r,a)}return i(n,[{key:"projectActivityReviewerCrud",value:function(e){return this.post("".concat(P.a.PROJECT_ACTIVITY_REVIEWER_CRUD),e)}},{key:"projectActivityReviewUpdate",value:function(e){return this.post("".concat(P.a.PROJECT_ACTIVITY_REVIEW_UPDATE),e)}}]),n}(U.a)).\u0275fac=function(e){return new(e||d)(I.Sb(L.b),I.Sb(Y.a),I.Sb(h.b),I.Sb(H.a))},d.\u0275prov=I.Fb({token:d,factory:d.\u0275fac,providedIn:"root"}),d),F=o("Ppwi"),B=o("Pghi"),W=o("SIl3"),J=o("3Pt+"),q=o("wCMH"),Q=o("gtxo"),X=["dropSelector"],$=["reviewerDropSelector"],Z=["dropSelectorBackdrop"];function ee(e,t){if(1&e&&I.Kb(0,"app-panel-header",20),2&e){var i=I.Yb();I.bc("panelTitle",i.getUserFullName(i.selectedUser.userFirstName,i.selectedUser.userLastName))("panelIcon",i.stringKey.ICON_SELECT)("panelColor",i.stringKey.COLOR_SUCCESS)("isEventRequired",!1)}}function te(e,t){if(1&e){var i=I.Pb();I.Ob(0,"ion-card"),I.Ob(1,"app-panel-header",21),I.Wb("event",function(){I.gc(i);var e=t.$implicit;return I.Yb().chooseUser(e)}),I.Nb(),I.Kb(2,"app-custom-fields",22),I.Nb()}if(2&e){var r=t.$implicit,n=I.Yb();I.zb(1),I.bc("panelTitle",n.getUserFullName(r.userFirstName,r.userLastName))("panelIcon",n.stringKey.ICON_USER)("panelColor",n.stringKey.COLOR_DARK)("eventIcon",n.stringKey.ICON_ACTIVATE)("isEventRequired",!0),I.zb(1),I.bc("description",r.userEmail)}}var ie,re=((ie=function(t){r(o,t);var n=a(o);function o(e,t,i,r,a,c,u,l){var b;return s(this,o),(b=n.call(this,e)).alertService=t,b.projectService=i,b.projectActivityReviewerService=r,b.loadingService=a,b.navParams=c,b.animationController=u,b.localStorageService=l,b._selectedUser=null,b._animationDuration=100,b._transitionHeight=-356,b.moduleEnum=z.a,b._activityReviewer=b.navParams.get("data"),b.buildFrom(),b.loadData(),b}return i(o,[{key:"projectReviewers",get:function(){return this._projectReviewers},set:function(e){this._projectReviewers=e}},{key:"selectedUser",get:function(){return this._selectedUser},set:function(e){this._selectedUser=e}},{key:"dropSelectorTitle",get:function(){return this._dropSelectorTitle},set:function(e){this._dropSelectorTitle=e}},{key:"ngOnInit",value:function(){this.dropSelectorBackdrop.nativeElement.hidden=!0}},{key:"ngOnDestroy",value:function(){e(c(o.prototype),"ngOnDestroy",this).call(this)}},{key:"loadData",value:function(){return Object(k.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadingService.present("".concat(D.a.API_REQUEST_MESSAGE_1)),this.projectService.getProjectRaw({projectId:this._activityReviewer.projectId,userId:this._activityReviewer.userId,rawDataKeys:["projectReviewers"]}).pipe(Object(M.a)(this.unsubscribe)).subscribe(function(e){t.loadingService.dismiss(),e.success&&(t._projectReviewers=e.data.projectReviewers.data)});case 1:case"end":return e.stop()}},e,this)}))}},{key:"chooseUser",value:function(e){this._selectedUser=e,this.formGroup.controls.reviewerUserId.setValue(this._selectedUser.userId),this.closeDropSelector()}},{key:"buildFrom",value:function(){this.formGroup=this.formBuilder.group({reviewerUserId:[this._activityReviewer.reviewerUserId,this.validators().compose([this.validators().required])]})}},{key:"userId",get:function(){return this.formGroup.get("userId")}},{key:"submit",value:function(){return Object(k.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.formGroup.invalid){e.next=5;break}return e.next=3,this.alertService.presentBasicAlert("".concat(this.stringKey.MANDATORY_FIELDS));case 3:e.next=6;break;case 5:this.submitData();case 6:case"end":return e.stop()}},e,this)}))}},{key:"buildDataModelToPass",value:function(){return{projectId:this._activityReviewer.projectId,userId:this._activityReviewer.userId,activityId:this._activityReviewer.activityId,reviewerUserId:this._selectedUser.userId,operationType:this._activityReviewer.operationType}}},{key:"submitData",value:function(){return Object(k.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadingService.present("".concat(this.stringKey.API_REQUEST_MESSAGE_2)),t=this.buildDataModelToPass(),this.projectActivityReviewerService.projectActivityReviewerCrud(t).pipe(Object(M.a)(this.unsubscribe)).subscribe(function(e){return Object(k.a)(i,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadingService.dismiss();case 2:if(t.t0=e.success,!t.t0){t.next=9;break}return this._modalData={cancelled:!1,operationSubmitted:!0},t.next=7,this.presentToast(e.message);case 7:return t.next=9,this.dismissModal();case 9:case"end":return t.stop()}},t,this)}))},function(e){return Object(k.a)(i,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadingService.dismiss();case 2:case"end":return e.stop()}},e,this)}))});case 3:case"end":return e.stop()}},e,this)}))}},{key:"cancelModal",value:function(){this._modalData={cancelled:!0,operationSubmitted:!1},this.dismissModal()}},{key:"dismissModal",value:function(){var e=this;this.modalController.dismiss(this._modalData).then(function(){e.formGroup.reset()})}},{key:"openDropSelector",value:function(e){return Object(k.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.activeDropSelector(e),this.animationController.create().addElement(this.dropSelector.nativeElement).duration(this._animationDuration).fromTo("transform","translateY(0px)","translateY(".concat(this._transitionHeight,"px)")).play();case 1:case"end":return t.stop()}},t,this)}))}},{key:"activeDropSelector",value:function(e){switch(this.dropSelectorBackdrop.nativeElement.hidden=!1,e){case z.a.reviewer:this._dropSelectorTitle="".concat(this.stringKey.SELECT," ").concat(z.a.reviewer),this.reviewerDropSelector.nativeElement.hidden=!1}}},{key:"closeDropSelector",value:function(){return Object(k.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.dropSelectorBackdrop.nativeElement.hidden=!0,this.animationController.create().addElement(this.dropSelector.nativeElement).duration(this._animationDuration).fromTo("transform","translateY(".concat(this._transitionHeight,"px)"),"translateY(0px)").play();case 1:case"end":return e.stop()}},e,this)}))}}]),o}(x.a)).\u0275fac=function(e){return new(e||ie)(I.Jb(I.t),I.Jb(V.a),I.Jb(j.a),I.Jb(G),I.Jb(F.a),I.Jb(h.X),I.Jb(h.c),I.Jb(Y.a))},ie.\u0275cmp=I.Db({type:ie,selectors:[["app-create-edit-project-activity-reviewer"]],viewQuery:function(e,t){var i;1&e&&(I.qc(X,3,I.m),I.qc($,3,I.m),I.qc(Z,3,I.m)),2&e&&(I.ec(i=I.Xb())&&(t.dropSelector=i.first),I.ec(i=I.Xb())&&(t.reviewerDropSelector=i.first),I.ec(i=I.Xb())&&(t.dropSelectorBackdrop=i.first))},features:[I.wb],decls:33,vars:13,consts:[[3,"appScrollTracker"],["color","primary"],["slot","start"],["fill","solid","color","dark",3,"click"],["slot","end"],["lines","none","color","primary","scrollEvents","true"],["scrollArea",""],[3,"title","info"],["color","primary","lines","none",3,"formGroup","ngSubmit"],["color","secondary",1,"selector",3,"click"],["color","dark","lines","none"],["slot","start",3,"src"],[3,"panelTitle","panelIcon","panelColor","isEventRequired",4,"ngIf"],[1,"dropSelectorBackdrop",3,"click"],["dropSelectorBackdrop",""],[1,"dropSelector"],["dropSelector",""],["fill","outline",3,"click"],["reviewerDropSelector",""],[4,"ngFor","ngForOf"],[3,"panelTitle","panelIcon","panelColor","isEventRequired"],[3,"panelTitle","panelIcon","panelColor","eventIcon","isEventRequired","event"],[3,"description"]],template:function(e,t){if(1&e&&(I.Ob(0,"ion-header",0),I.Ob(1,"ion-toolbar",1),I.Ob(2,"ion-title"),I.lc(3),I.Nb(),I.Ob(4,"ion-buttons",2),I.Ob(5,"ion-button",3),I.Wb("click",function(){return t.cancelModal()}),I.lc(6),I.Nb(),I.Nb(),I.Ob(7,"ion-buttons",4),I.Ob(8,"ion-button",3),I.Wb("click",function(){return t.submit()}),I.lc(9),I.Nb(),I.Nb(),I.Nb(),I.Nb(),I.Ob(10,"ion-content",5,6),I.Kb(12,"app-page-info-title",7),I.Ob(13,"form",8),I.Wb("ngSubmit",function(){return t.submit()}),I.Ob(14,"ion-card",9),I.Wb("click",function(){return t.openDropSelector(t.moduleEnum.reviewer)}),I.Ob(15,"ion-item",10),I.Kb(16,"ion-icon",11),I.lc(17),I.Nb(),I.kc(18,ee,1,4,"app-panel-header",12),I.Nb(),I.Nb(),I.Nb(),I.Ob(19,"div",13,14),I.Wb("click",function(){return t.closeDropSelector()}),I.Nb(),I.Ob(21,"div",15,16),I.Ob(23,"ion-header"),I.Ob(24,"ion-toolbar",1),I.Ob(25,"ion-title",2),I.lc(26),I.Nb(),I.Ob(27,"ion-buttons",4),I.Ob(28,"ion-button",17),I.Wb("click",function(){return t.closeDropSelector()}),I.lc(29),I.Nb(),I.Nb(),I.Nb(),I.Nb(),I.Ob(30,"ion-content",null,18),I.kc(32,te,3,6,"ion-card",19),I.Nb(),I.Nb()),2&e){var i=I.fc(11);I.bc("appScrollTracker",i),I.zb(3),I.nc(" ",t.stringKey.CHOOSE_REVIEWER," "),I.zb(3),I.mc(t.stringKey.CANCEL),I.zb(3),I.mc(t.stringKey.SELECT),I.zb(3),I.bc("title",t.stringKey.CHOOSE_REVIEWER)("info",t.stringKey.PROJECT_REVIEWER_INFO),I.zb(1),I.bc("formGroup",t.formGroup),I.zb(3),I.bc("src",t.stringKey.ICON_REVIEWER),I.zb(1),I.nc(" ",t.stringKey.FORM_INFO_SELECT_REVIEWER," "),I.zb(1),I.bc("ngIf",t.selectedUser),I.zb(8),I.nc(" ",t.dropSelectorTitle," "),I.zb(3),I.mc(t.stringKey.CLOSE),I.zb(3),I.bc("ngForOf",t.projectReviewers)}},directives:[h.u,B.a,h.Q,h.O,h.k,h.j,h.o,W.a,J.m,J.h,J.c,h.l,h.x,h.v,p.j,p.i,q.a,Q.a],styles:[".dropSelectorBackdrop[_ngcontent-%COMP%]{position:fixed;width:100%;height:100%;background-color:var(--ion-color-primary);z-index:999;opacity:.6}.dropSelector[_ngcontent-%COMP%]{position:fixed;bottom:-300px;width:100%;height:300px;z-index:1000}p.capitalize[_ngcontent-%COMP%]{text-transform:capitalize}"]}),ie),ne=o("tUwt"),ae=o("fGi1"),oe=o("xSju"),ce=o("NvSi");function se(e,t){if(1&e&&I.Kb(0,"app-custom-fields",3),2&e){var i=I.Yb();I.bc("data",i.stringKey.MEASUREMENT_TYPE_NUM_INFO)}}function ue(e,t){if(1&e&&I.Kb(0,"app-custom-fields",3),2&e){var i=I.Yb();I.bc("data",i.stringKey.MEASUREMENT_TYPE_BOOL_INFO)}}function le(e,t){if(1&e&&(I.Ob(0,"div",4),I.Ob(1,"table"),I.Ob(2,"tr"),I.Ob(3,"th"),I.lc(4),I.Nb(),I.Ob(5,"th"),I.lc(6),I.Nb(),I.Ob(7,"th"),I.lc(8),I.Nb(),I.Ob(9,"th"),I.lc(10),I.Nb(),I.Ob(11,"th"),I.lc(12),I.Nb(),I.Nb(),I.Ob(13,"tr"),I.Kb(14,"td",5),I.Nb(),I.Ob(15,"tr"),I.Ob(16,"td"),I.lc(17),I.Nb(),I.Ob(18,"td"),I.lc(19),I.Nb(),I.Ob(20,"td"),I.lc(21),I.Nb(),I.Ob(22,"td"),I.lc(23),I.Nb(),I.Ob(24,"td"),I.lc(25),I.Nb(),I.Nb(),I.Ob(26,"tr"),I.Kb(27,"td",5),I.Nb(),I.Nb(),I.Nb()),2&e){var i=I.Yb();I.zb(4),I.mc(i.stringKey.POOR),I.zb(2),I.mc(i.stringKey.IMPROVEMENT),I.zb(2),I.mc(i.stringKey.EXPECTATION),I.zb(2),I.mc(i.stringKey.EXCEED),I.zb(2),I.mc(i.stringKey.OUTSTANDING),I.zb(5),I.oc(" ",i.stringKey.LESS_THAN," ",i.activity.criteriaPoorValue," "),I.zb(2),I.pc(" ",i.stringKey.MORE_THAN_EQUAL," ",i.activity.criteriaPoorValue,", ",i.stringKey.LESS_THAN," ",i.activity.criteriaImprovementValue," "),I.zb(2),I.pc(" ",i.stringKey.MORE_THAN_EQUAL," ",i.activity.criteriaImprovementValue,", ",i.stringKey.LESS_THAN," ",i.activity.criteriaExpectationValue," "),I.zb(2),I.pc(" ",i.stringKey.MORE_THAN_EQUAL," ",i.activity.criteriaExpectationValue,", ",i.stringKey.LESS_THAN," ",i.activity.criteriaExceedValue," "),I.zb(2),I.pc(" ",i.stringKey.MORE_THAN_EQUAL," ",i.activity.criteriaExceedValue,", ",i.stringKey.LESS_THAN_EQUAL," ",i.activity.criteriaOutstandingValue," ")}}var be,de=((be=function(e){r(n,e);var t=a(n);function n(e){var i;return s(this,n),(i=t.call(this,e)).activityMeasurementTypeEnum=ne.a,i}return i(n,[{key:"ngOnInit",value:function(){}}]),n}(K.a)).\u0275fac=function(e){return new(e||be)(I.Jb(I.t))},be.\u0275cmp=I.Db({type:be,selectors:[["app-measurement-scale"]],inputs:{activity:"activity"},features:[I.wb],decls:5,vars:6,consts:[["eventIcon","stringKey.ICON_MORE",3,"panelTitle","panelIcon","panelColor"],[3,"data",4,"ngIf"],["id","overflow-content",4,"ngIf"],[3,"data"],["id","overflow-content"],["colspan","5"]],template:function(e,t){1&e&&(I.Ob(0,"ion-card"),I.Kb(1,"app-panel-header",0),I.kc(2,se,1,1,"app-custom-fields",1),I.kc(3,ue,1,1,"app-custom-fields",1),I.kc(4,le,28,23,"div",2),I.Nb()),2&e&&(I.zb(1),I.bc("panelTitle",t.stringKey.ACTIVITY_MEASUREMENT_SCALE)("panelIcon",t.stringKey.ICON_SCALE)("panelColor",t.stringKey.COLOR_MEDIUM),I.zb(1),I.bc("ngIf",t.activity.activityMeasurementType==t.activityMeasurementTypeEnum.Num),I.zb(1),I.bc("ngIf",t.activity.activityMeasurementType==t.activityMeasurementTypeEnum.Bool),I.zb(1),I.bc("ngIf",t.activity.activityMeasurementType==t.activityMeasurementTypeEnum.Num))},directives:[h.l,q.a,p.j,Q.a],styles:[""]}),be),pe=function(){return{standalone:!0}};function ve(e,t){if(1&e){var i=I.Pb();I.Ob(0,"ion-item",15),I.Ob(1,"ion-label",2),I.lc(2),I.Nb(),I.Ob(3,"ion-toggle",20),I.Wb("ngModelChange",function(e){return I.gc(i),I.Yb().isToggled=e})("ionChange",function(e){return I.gc(i),I.Yb().onToggleBtnChange(e)}),I.Nb(),I.Ob(4,"ion-label",4),I.lc(5),I.Nb(),I.Nb()}if(2&e){var r=I.Yb();I.zb(2),I.mc(r.stringKey.NOT_ACHIEVED),I.zb(1),I.bc("ngModel",r.isToggled)("ngModelOptions",I.cc(4,pe)),I.zb(2),I.mc(r.stringKey.ACHIEVED)}}function he(e,t){if(1&e&&(I.Ob(0,"ion-range",23),I.Ob(1,"ion-label",2),I.lc(2),I.Nb(),I.Ob(3,"ion-label",4),I.lc(4),I.Nb(),I.Nb()),2&e){var i=I.Yb(2);I.bc("min",i.passedActivity.criteriaPoorValue)("max",i.passedActivity.criteriaOutstandingValue),I.zb(2),I.mc(i.passedActivity.criteriaPoorValue),I.zb(2),I.mc(i.passedActivity.criteriaOutstandingValue)}}function me(e,t){if(1&e&&(I.Ob(0,"ion-range",23),I.Ob(1,"ion-label",2),I.lc(2),I.Nb(),I.Ob(3,"ion-label",4),I.lc(4),I.Nb(),I.Nb()),2&e){var i=I.Yb(2);I.bc("min",i.passedActivity.criteriaOutstandingValue)("max",i.passedActivity.criteriaPoorValue),I.zb(2),I.mc(i.passedActivity.criteriaOutstandingValue),I.zb(2),I.mc(i.passedActivity.criteriaPoorValue)}}function fe(e,t){if(1&e&&(I.Ob(0,"ion-item",15),I.kc(1,he,5,4,"ion-range",21),I.kc(2,me,5,4,"ion-range",21),I.Ob(3,"span",22),I.lc(4),I.Nb(),I.Ob(5,"span",22),I.lc(6),I.Nb(),I.Nb()),2&e){var i=I.Yb();I.zb(1),I.bc("ngIf",i.characteristicsHigherBetter),I.zb(1),I.bc("ngIf",!i.characteristicsHigherBetter),I.zb(2),I.mc(i.claimedResultValue.value),I.zb(2),I.nc("\xa0 ",i.passedActivity.activityResultType,"")}}function ge(e,t){if(1&e&&(I.Ob(0,"ion-card",24),I.Ob(1,"ion-item",24),I.Kb(2,"ion-icon",25),I.lc(3),I.Nb(),I.Nb()),2&e){var i=I.Yb();I.zb(2),I.bc("src",i.stringKey.ICON_WARNING),I.zb(1),I.nc(" ",i.stringKey.FORM_VALIDATION_COMMENT," ")}}var ye,Oe=((ye=function(t){r(o,t);var n=a(o);function o(e,t,i,r,a){var c;return s(this,o),(c=n.call(this,e)).alertService=t,c.projectActivityService=i,c.loadingService=r,c.navParams=a,c._isToggled=!1,c.activityMeasurementTypeEnum=ne.a,c._characteristicsHigherBetter=!1,c}return i(o,[{key:"passedActivity",get:function(){return this._passedActivity},set:function(e){this._passedActivity=e}},{key:"isToggled",get:function(){return this._isToggled},set:function(e){this._isToggled=e}},{key:"characteristicsHigherBetter",get:function(){return this._characteristicsHigherBetter},set:function(e){this._characteristicsHigherBetter=e}},{key:"ngOnInit",value:function(){this._passedActivity=this.navParams.get("data"),this._characteristicsHigherBetter="1"==this._passedActivity.characteristicsHigherBetter.toString(),this.buildFrom()}},{key:"ngOnDestroy",value:function(){e(c(o.prototype),"ngOnDestroy",this).call(this)}},{key:"commentDescription",get:function(){return this.formGroup.get("commentDescription")}},{key:"claimedResultValue",get:function(){return this.formGroup.get("claimedResultValue")}},{key:"buildFrom",value:function(){this.formGroup=this.formBuilder.group({commentDescription:[this._passedActivity.commentDescription,this.validators().compose([this.validators().required,this.validators().pattern(this.regex.COMMENT_PATTERN)])],claimedResultValue:[this._passedActivity.claimedResultValue,this.validators().compose([this.validators().required,this.validators().pattern(this.regex.NUMBER_PATTERN)])]}),this.setPassedValueToFrom(),this.mapToggle()}},{key:"setPassedValueToFrom",value:function(){var e=this.formGroup.value;e.commentDescription=this._passedActivity.commentDescription,e.claimedResultValue=this._passedActivity.claimedResultValue}},{key:"mapToggle",value:function(){return Object(k.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this._passedActivity.activityMeasurementType==this.activityMeasurementTypeEnum.Bool&&(this._isToggled=100==this._passedActivity.claimedResultValue);case 1:case"end":return e.stop()}},e,this)}))}},{key:"onToggleBtnChange",value:function(e){this.formGroup.controls.claimedResultValue.setValue(this._isToggled?100:0)}},{key:"pageTitle",get:function(){var e;switch(this._passedActivity.operationType){case S.a.Create:e=this.stringKey.ADD_COMMENT;break;case S.a.Edit:e=this.stringKey.UPDATE_COMMENT}return e}},{key:"buildDataModelToPass",value:function(){var e=this.formGroup.value;return{userId:this._passedActivity.userId,projectId:this._passedActivity.projectId,activityId:this._passedActivity.activityId,assigneeUserId:this._passedActivity.assigneeUserId,commentId:this._passedActivity.commentId,commentDescription:e.commentDescription,claimedResultValue:e.claimedResultValue,operationType:this._passedActivity.operationType}}},{key:"submit",value:function(){return Object(k.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.formGroup.invalid){e.next=5;break}return e.next=3,this.alertService.presentBasicAlert("".concat(this.stringKey.MANDATORY_FIELDS));case 3:e.next=7;break;case 5:return e.next=7,this.submitData();case 7:case"end":return e.stop()}},e,this)}))}},{key:"getLoadingMessage",value:function(){return Object(k.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._passedActivity.operationType===S.a.Delete?"".concat(this.stringKey.API_REQUEST_MESSAGE_6):"".concat(this.stringKey.API_REQUEST_MESSAGE_2));case 1:case"end":return e.stop()}},e,this)}))}},{key:"delete",value:function(){return Object(k.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({header:this.stringKey.CONFIRM_ACTION,message:this.stringKey.ALERT_DELETE,buttons:[{text:this.stringKey.CANCEL,handler:function(){}},{text:this.stringKey.YES,handler:function(){return Object(k.a)(i,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._passedActivity.operationType=S.a.Delete,e.next=3,this.submitData();case 3:case"end":return e.stop()}},e,this)}))}}]});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}},e,this)}))}},{key:"submitData",value:function(){return Object(k.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this.loadingService,e.next=3,this.getLoadingMessage();case 3:e.t1=e.sent,e.t0.present.call(e.t0,e.t1),t=this.buildDataModelToPass(),this.projectActivityService.projectActivityCommentCrud(t).pipe(Object(M.a)(this.unsubscribe)).subscribe(function(e){return Object(k.a)(i,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadingService.dismiss();case 2:if(t.t0=e.success,!t.t0){t.next=8;break}return this._modalData={cancelled:!1,operationSubmitted:!0},t.next=7,this.presentToast(e.message);case 7:this.dismissModal();case 8:this._passedActivity.operationType===S.a.Delete&&this.cancelModal();case 9:case"end":return t.stop()}},t,this)}))},function(e){i.loadingService.dismiss()});case 7:case"end":return e.stop()}},e,this)}))}},{key:"dismissModal",value:function(){var e=this;this.modalController.dismiss(this._modalData).then(function(){e.formGroup.reset()})}},{key:"cancelModal",value:function(){this._modalData={cancelled:!0,operationSubmitted:!1},this.dismissModal()}}]),o}(x.a)).\u0275fac=function(e){return new(e||ye)(I.Jb(I.t),I.Jb(V.a),I.Jb(oe.a),I.Jb(F.a),I.Jb(h.X))},ye.\u0275cmp=I.Db({type:ye,selectors:[["app-create-edit-project-activity-comment"]],inputs:{data:"data"},features:[I.wb],decls:35,vars:16,consts:[[3,"appScrollTracker"],["color","primary"],["slot","start"],["fill","solid","color","dark",3,"click"],["slot","end"],["lines","none","color","primary","scrollEvents","true"],["scrollArea",""],[3,"title","info"],["slot","fixed","vertical","bottom","horizontal","end"],["color","dark",3,"click"],[3,"src"],["color","primary","lines","none",3,"formGroup","ngSubmit"],["color","secondary"],["color","secondary","lines","none"],["slot","start",3,"src"],["lines","none","color","light"],["lines","none","color","light",4,"ngIf"],["rows","13","autocomplete","off","formControlName","commentDescription","type","text",3,"placeholder"],["color","warning",4,"ngIf"],["id","dum-height"],["color","primary",3,"ngModel","ngModelOptions","ngModelChange","ionChange"],["formControlName","claimedResultValue","color","primary","step","1",3,"min","max",4,"ngIf"],[1,"percentage"],["formControlName","claimedResultValue","color","primary","step","1",3,"min","max"],["color","warning"],["color","danger","slot","start",3,"src"]],template:function(e,t){if(1&e&&(I.Ob(0,"ion-header",0),I.Ob(1,"ion-toolbar",1),I.Ob(2,"ion-title"),I.lc(3),I.Nb(),I.Ob(4,"ion-buttons",2),I.Ob(5,"ion-button",3),I.Wb("click",function(){return t.cancelModal()}),I.lc(6),I.Nb(),I.Nb(),I.Ob(7,"ion-buttons",4),I.Ob(8,"ion-button",3),I.Wb("click",function(){return t.submit()}),I.lc(9),I.Nb(),I.Nb(),I.Nb(),I.Nb(),I.Ob(10,"ion-content",5,6),I.Kb(12,"app-page-info-title",7),I.Ob(13,"ion-fab",8),I.Ob(14,"ion-fab-button",9),I.Wb("click",function(){return t.submit()}),I.Kb(15,"ion-icon",10),I.Nb(),I.Nb(),I.Ob(16,"form",11),I.Wb("ngSubmit",function(){return t.submit()}),I.Ob(17,"ion-card",12),I.Ob(18,"p"),I.Ob(19,"ion-item",13),I.Kb(20,"ion-icon",14),I.lc(21),I.Nb(),I.Nb(),I.Ob(22,"ion-card",15),I.kc(23,ve,6,5,"ion-item",16),I.kc(24,fe,7,4,"ion-item",16),I.Nb(),I.Nb(),I.Ob(25,"ion-card",12),I.Ob(26,"p"),I.Ob(27,"ion-item",13),I.Kb(28,"ion-icon",14),I.lc(29),I.Nb(),I.Nb(),I.Ob(30,"ion-card",15),I.Ob(31,"ion-item",15),I.Kb(32,"ion-textarea",17),I.Nb(),I.kc(33,ge,4,2,"ion-card",18),I.Nb(),I.Nb(),I.Nb(),I.Kb(34,"div",19),I.Nb()),2&e){var i=I.fc(11);I.bc("appScrollTracker",i),I.zb(3),I.nc(" ",t.pageTitle," "),I.zb(3),I.mc(t.stringKey.CANCEL),I.zb(3),I.mc(t.stringKey.SAVE),I.zb(3),I.bc("title",t.pageTitle)("info",t.stringKey.COMMENT_INFO),I.zb(3),I.bc("src",t.stringKey.ICON_SAVE),I.zb(1),I.bc("formGroup",t.formGroup),I.zb(4),I.bc("src",t.stringKey.ICON_SLIDER),I.zb(1),I.nc(" ",t.stringKey.FORM_INFO_ASSIGNEE_ACTIVITY_CLAIM_FACT," "),I.zb(2),I.bc("ngIf",t.passedActivity.activityMeasurementType==t.activityMeasurementTypeEnum.Bool),I.zb(1),I.bc("ngIf",t.passedActivity.activityMeasurementType==t.activityMeasurementTypeEnum.Num),I.zb(4),I.bc("src",t.stringKey.ICON_CREATE),I.zb(1),I.nc(" ",t.stringKey.FORM_INFO_ACTIVITY_ASSIGNEE_COMMENT," "),I.zb(3),I.bc("placeholder",t.stringKey.FORM_PLACEHOLDER_COMMENT),I.zb(1),I.bc("ngIf",t.commentDescription.invalid&&t.commentDescription.touched)}},directives:[h.u,B.a,h.Q,h.O,h.k,h.j,h.o,W.a,h.q,h.r,h.v,J.m,J.h,J.c,h.l,h.x,p.j,h.N,h.cb,J.g,J.b,h.y,h.P,h.d,J.j,h.E,h.bb],styles:[""]}),ye),Re=o("8yqH");function Ie(e,t){if(1&e&&I.Kb(0,"app-no-data",8),2&e){var i=I.Yb();I.bc("comment",!0)("text",i.stringKey.NO_DATA_COMMENT)}}function _e(e,t){if(1&e&&I.Kb(0,"app-custom-fields",9),2&e){var i=I.Yb();I.bc("data",i.showResult(i.activity))}}function Ee(e,t){if(1&e&&(I.Ob(0,"ion-card"),I.Kb(1,"app-work-progress",10),I.Nb()),2&e){var i=I.Yb();I.zb(1),I.bc("activity",i.activity)("resultValue",i.activity.claimedResultValue)}}function Ne(e,t){1&e&&I.Kb(0,"app-custom-fields",11),2&e&&I.bc("noData",!0)}function Te(e,t){if(1&e&&I.Kb(0,"app-custom-fields",9),2&e){var i=I.Yb();I.bc("data",i.activity.commentDescription)}}function we(e,t){1&e&&I.Kb(0,"app-custom-fields",11),2&e&&I.bc("noData",!0)}var Ae,Ce=((Ae=function(t){r(o,t);var n=a(o);function o(e,t,i){var r;return s(this,o),(r=n.call(this,e)).localStorageService=t,r.alertService=i,r.event=new I.o,r}return i(o,[{key:"ngOnInit",value:function(){this.activeUserId(),this._projectId=this.activatedRoute.snapshot.paramMap.get("projectId")}},{key:"ngOnDestroy",value:function(){e(c(o.prototype),"ngOnDestroy",this).call(this)}},{key:"activeUserId",value:function(){return Object(k.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.localStorageService.getActiveUserId().pipe(Object(M.a)(this.unsubscribe)).subscribe(function(e){t._loggedInUser=e});case 1:case"end":return e.stop()}},e,this)}))}},{key:"showResult",value:function(e){return e.activityMeasurementType==ne.a.Bool?this.stringKey.ACHIEVED:"".concat(e.claimedResultValue.toString()," ").concat(e.activityResultType)}},{key:"openActivityCommentOptions",value:function(e){return Object(k.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var i,r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.actionSheetController.create({header:this.stringKey.CHOOSE_YOUR_ACTION,buttons:[{text:this.stringKey.EDIT+" "+this.stringKey.DETAILS,icon:this.stringKey.ICON_EDIT,handler:function(){e.commentId?r.editActivityComment(e,"".concat(S.a.Edit)):r.addActivityComment(e)}},{text:this.stringKey.CANCEL,icon:this.stringKey.ICON_CANCEL,handler:function(){}}]});case 2:return i=t.sent,t.next=5,i.present();case 5:case"end":return t.stop()}},t,this)}))}},{key:"addActivityComment",value:function(e){return Object(k.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var i,r,n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this._loggedInUser!=e.assigneeUserId){t.next=9;break}return i={userId:this._loggedInUser,projectId:this._projectId,assigneeUserId:e.assigneeUserId,activityId:e.activityId,commentDescription:e.commentDescription,claimedResultValue:e.claimedResultValue,activityMeasurementType:e.activityMeasurementType,activityResultType:e.activityResultType,criteriaPoorValue:e.criteriaPoorValue,criteriaOutstandingValue:e.criteriaOutstandingValue,characteristicsHigherBetter:e.characteristicsHigherBetter,operationType:"".concat(S.a.Create)},t.next=4,this.modalController.create({component:Oe,componentProps:{data:i}});case 4:return(r=t.sent).onDidDismiss().then(function(e){n._modalData=e.data,n._modalData.cancelled||n.event.emit()}),t.next=8,r.present();case 8:return t.abrupt("return",t.sent);case 9:this.alertService.presentBasicAlert(this.stringKey.ALERT_NO_SAME_USER);case 10:case"end":return t.stop()}},t,this)}))}},{key:"editActivityComment",value:function(e,t){return Object(k.a)(this,void 0,void 0,regeneratorRuntime.mark(function i(){var r,n,a=this;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(this._loggedInUser!=e.assigneeUserId){i.next=9;break}return r={userId:this._loggedInUser,projectId:this._projectId,assigneeUserId:e.assigneeUserId,activityId:e.activityId,commentId:e.commentId,commentDescription:e.commentDescription,claimedResultValue:e.claimedResultValue,activityMeasurementType:e.activityMeasurementType,activityResultType:e.activityResultType,criteriaPoorValue:e.criteriaPoorValue,criteriaOutstandingValue:e.criteriaOutstandingValue,characteristicsHigherBetter:e.characteristicsHigherBetter,operationType:t},i.next=4,this.modalController.create({component:Oe,componentProps:{data:r}});case 4:return(n=i.sent).onDidDismiss().then(function(e){a._modalData=e.data,a._modalData.cancelled||a.event.emit()}),i.next=8,n.present();case 8:return i.abrupt("return",i.sent);case 9:this.alertService.presentBasicAlert(this.stringKey.ALERT_NO_SAME_USER);case 10:case"end":return i.stop()}},i,this)}))}}]),o}(K.a)).\u0275fac=function(e){return new(e||Ae)(I.Jb(I.t),I.Jb(Y.a),I.Jb(V.a))},Ae.\u0275cmp=I.Db({type:Ae,selectors:[["app-assignee-self-review"]],inputs:{activity:"activity",allowAction:"allowAction"},outputs:{event:"event"},features:[I.wb],decls:17,vars:20,consts:[[3,"panelTitle","panelIcon","panelColor","eventIcon","isEventRequired","event"],[3,"panelTitle","panelIcon","panelColor"],[3,"comment","text",4,"ngIf"],["size-lg","4","size-md","4","size-sm","4","size","12"],[3,"data",4,"ngIf"],[4,"ngIf"],[3,"noData",4,"ngIf"],["size-lg","8","size-md","8","size-sm","8","size","12"],[3,"comment","text"],[3,"data"],[3,"activity","resultValue"],[3,"noData"]],template:function(e,t){1&e&&(I.Ob(0,"ion-card"),I.Ob(1,"app-panel-header",0),I.Wb("event",function(){return t.openActivityCommentOptions(t.activity)}),I.Nb(),I.Kb(2,"app-panel-header",1),I.kc(3,Ie,1,2,"app-no-data",2),I.Ob(4,"ion-grid"),I.Ob(5,"ion-row"),I.Ob(6,"ion-col",3),I.Ob(7,"ion-card"),I.Kb(8,"app-panel-header",1),I.kc(9,_e,1,1,"app-custom-fields",4),I.kc(10,Ee,2,2,"ion-card",5),I.kc(11,Ne,1,1,"app-custom-fields",6),I.Nb(),I.Nb(),I.Ob(12,"ion-col",7),I.Ob(13,"ion-card"),I.Kb(14,"app-panel-header",1),I.kc(15,Te,1,1,"app-custom-fields",4),I.kc(16,we,1,1,"app-custom-fields",6),I.Nb(),I.Nb(),I.Nb(),I.Nb(),I.Nb()),2&e&&(I.zb(1),I.bc("panelTitle",t.stringKey.ASSIGNEE_SELF_REVIEW)("panelIcon",t.stringKey.ICON_SELF_REVIEW)("panelColor",t.stringKey.COLOR_MEDIUM)("eventIcon",t.stringKey.ICON_MORE)("isEventRequired",t.allowAction),I.zb(1),I.bc("panelTitle",t.getUserFullName(t.activity.assigneeUserFirstName,t.activity.assigneeUserLastName))("panelIcon",t.stringKey.ICON_USER)("panelColor",t.stringKey.COLOR_LIGHT),I.zb(1),I.bc("ngIf",!t.activity.commentDescription),I.zb(5),I.bc("panelTitle",t.stringKey.ACHIEVED_RESULT)("panelIcon",t.stringKey.ICON_CLAIM_RESULT)("panelColor",t.stringKey.COLOR_LIGHT),I.zb(1),I.bc("ngIf",t.activity.claimedResultValue),I.zb(1),I.bc("ngIf",t.activity.claimedResultValue),I.zb(1),I.bc("ngIf",!t.activity.claimedResultValue),I.zb(3),I.bc("panelTitle",t.stringKey.ASSIGNEE_COMMENT)("panelIcon",t.stringKey.ICON_COMMENT)("panelColor",t.stringKey.COLOR_LIGHT),I.zb(1),I.bc("ngIf",t.activity.commentDescription),I.zb(1),I.bc("ngIf",!t.activity.commentDescription))},directives:[h.l,q.a,p.j,h.t,h.I,h.n,ce.a,Q.a,Re.a],styles:[""]}),Ae),ke=function(){return{standalone:!0}};function Se(e,t){if(1&e){var i=I.Pb();I.Ob(0,"ion-item",15),I.Ob(1,"ion-label",2),I.lc(2),I.Nb(),I.Ob(3,"ion-toggle",20),I.Wb("ngModelChange",function(e){return I.gc(i),I.Yb().isToggled=e})("ionChange",function(e){return I.gc(i),I.Yb().onToggleBtnChange(e)}),I.Nb(),I.Ob(4,"ion-label",4),I.lc(5),I.Nb(),I.Nb()}if(2&e){var r=I.Yb();I.zb(2),I.mc(r.stringKey.NOT_ACHIEVED),I.zb(1),I.bc("ngModel",r.isToggled)("ngModelOptions",I.cc(4,ke)),I.zb(2),I.mc(r.stringKey.ACHIEVED)}}function Ke(e,t){if(1&e&&(I.Ob(0,"ion-range",23),I.Ob(1,"ion-label",2),I.lc(2),I.Nb(),I.Ob(3,"ion-label",4),I.lc(4),I.Nb(),I.Nb()),2&e){var i=I.Yb(2);I.bc("min",i.passedActivityReview.criteriaPoorValue)("max",i.passedActivityReview.criteriaOutstandingValue),I.zb(2),I.mc(i.passedActivityReview.criteriaPoorValue),I.zb(2),I.mc(i.passedActivityReview.criteriaOutstandingValue)}}function De(e,t){if(1&e&&(I.Ob(0,"ion-range",23),I.Ob(1,"ion-label",2),I.lc(2),I.Nb(),I.Ob(3,"ion-label",4),I.lc(4),I.Nb(),I.Nb()),2&e){var i=I.Yb(2);I.bc("min",i.passedActivityReview.criteriaOutstandingValue)("max",i.passedActivityReview.criteriaPoorValue),I.zb(2),I.mc(i.passedActivityReview.criteriaOutstandingValue),I.zb(2),I.mc(i.passedActivityReview.criteriaPoorValue)}}function Me(e,t){if(1&e&&(I.Ob(0,"ion-item",15),I.kc(1,Ke,5,4,"ion-range",21),I.kc(2,De,5,4,"ion-range",21),I.Ob(3,"span",22),I.lc(4),I.Nb(),I.Ob(5,"span",22),I.lc(6),I.Nb(),I.Nb()),2&e){var i=I.Yb();I.zb(1),I.bc("ngIf",i.characteristicsHigherBetter),I.zb(1),I.bc("ngIf",!i.characteristicsHigherBetter),I.zb(2),I.mc(i.achievedResultValue.value),I.zb(2),I.nc("\xa0 ",i.passedActivityReview.activityResultType,"")}}function xe(e,t){if(1&e&&(I.Ob(0,"ion-card",24),I.Ob(1,"ion-item",24),I.Kb(2,"ion-icon",25),I.lc(3),I.Nb(),I.Nb()),2&e){var i=I.Yb();I.zb(2),I.bc("src",i.stringKey.ICON_WARNING),I.zb(1),I.nc(" ",i.stringKey.FORM_VALIDATION_COMMENT," ")}}var ze,Ve=((ze=function(t){r(o,t);var n=a(o);function o(e,t,i,r,a,c){var u;return s(this,o),(u=n.call(this,e)).alertService=t,u.projectActivityService=i,u.projectActivityReviewerService=r,u.loadingService=a,u.navParams=c,u.activityMeasurementTypeEnum=ne.a,u._isToggled=!1,u._characteristicsHigherBetter=!1,u}return i(o,[{key:"passedActivityReview",get:function(){return this._passedActivityReview},set:function(e){this._passedActivityReview=e}},{key:"isToggled",get:function(){return this._isToggled},set:function(e){this._isToggled=e}},{key:"characteristicsHigherBetter",get:function(){return this._characteristicsHigherBetter},set:function(e){this._characteristicsHigherBetter=e}},{key:"ngOnInit",value:function(){this._passedActivityReview=this.navParams.get("data"),console.log(this._passedActivityReview),this._characteristicsHigherBetter="1"==this._passedActivityReview.characteristicsHigherBetter.toString(),this.buildFrom()}},{key:"ngOnDestroy",value:function(){e(c(o.prototype),"ngOnDestroy",this).call(this)}},{key:"achievedResultValue",get:function(){return this.formGroup.get("achievedResultValue")}},{key:"reviewerComment",get:function(){return this.formGroup.get("reviewerComment")}},{key:"buildFrom",value:function(){return Object(k.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.formGroup=this.formBuilder.group({achievedResultValue:[this._passedActivityReview.achievedResultValue,this.validators().compose([this.validators().required,this.validators().pattern(this.regex.NUMBER_PATTERN)])],reviewerComment:[this._passedActivityReview.reviewerComment,this.validators().compose([this.validators().required,this.validators().pattern(this.regex.COMMENT_PATTERN)])]}),this.setPassedValueToFrom(),e.next=4,this.mapToggle();case 4:case"end":return e.stop()}},e,this)}))}},{key:"setPassedValueToFrom",value:function(){var e=this.formGroup.value;e.reviewerComment=this._passedActivityReview.reviewerComment,e.achievedResultValue=this._passedActivityReview.achievedResultValue}},{key:"mapToggle",value:function(){return Object(k.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this._passedActivityReview.activityMeasurementType==this.activityMeasurementTypeEnum.Bool&&(this._isToggled=100==this._passedActivityReview.achievedResultValue);case 1:case"end":return e.stop()}},e,this)}))}},{key:"buildDataModelToPass",value:function(){var e=this.formGroup.value;return{userId:this._passedActivityReview.userId,projectId:this._passedActivityReview.projectId,activityId:this._passedActivityReview.activityId,activityReviewId:this._passedActivityReview.activityReviewId,reviewerUserId:this._passedActivityReview.reviewerUserId,reviewerComment:e.reviewerComment,achievedResultValue:e.achievedResultValue,operationType:this._passedActivityReview.operationType}}},{key:"submit",value:function(){return Object(k.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.formGroup.invalid){e.next=5;break}return e.next=3,this.alertService.presentBasicAlert("".concat(this.stringKey.MANDATORY_FIELDS));case 3:e.next=7;break;case 5:return e.next=7,this.submitData();case 7:case"end":return e.stop()}},e,this)}))}},{key:"getLoadingMessage",value:function(){return Object(k.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._passedActivityReview.operationType===S.a.Delete?"".concat(this.stringKey.API_REQUEST_MESSAGE_6):"".concat(this.stringKey.API_REQUEST_MESSAGE_2));case 1:case"end":return e.stop()}},e,this)}))}},{key:"delete",value:function(){return Object(k.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({header:this.stringKey.CONFIRM_ACTION,message:this.stringKey.ALERT_DELETE,buttons:[{text:this.stringKey.CANCEL,handler:function(){}},{text:this.stringKey.YES,handler:function(){return Object(k.a)(i,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._passedActivityReview.operationType=S.a.Delete,e.next=3,this.submitData();case 3:case"end":return e.stop()}},e,this)}))}}]});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}},e,this)}))}},{key:"submitData",value:function(){return Object(k.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadingService.present("".concat(this.stringKey.API_REQUEST_MESSAGE_2)),t=this.buildDataModelToPass(),this.projectActivityReviewerService.projectActivityReviewUpdate(t).pipe(Object(M.a)(this.unsubscribe)).subscribe(function(e){return Object(k.a)(i,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadingService.dismiss();case 2:if(t.t0=e.success,!t.t0){t.next=8;break}return this._modalData={cancelled:!1,operationSubmitted:!0},t.next=7,this.presentToast(e.message);case 7:this.dismissModal();case 8:case"end":return t.stop()}},t,this)}))},function(e){i.loadingService.dismiss()});case 3:case"end":return e.stop()}},e,this)}))}},{key:"onToggleBtnChange",value:function(e){this.formGroup.controls.achievedResultValue.setValue(this._isToggled?100:0)}},{key:"dismissModal",value:function(){var e=this;this.modalController.dismiss(this._modalData).then(function(){e.formGroup.reset()})}},{key:"cancelModal",value:function(){this._modalData={cancelled:!0,operationSubmitted:!1},this.dismissModal()}}]),o}(x.a)).\u0275fac=function(e){return new(e||ze)(I.Jb(I.t),I.Jb(V.a),I.Jb(oe.a),I.Jb(G),I.Jb(F.a),I.Jb(h.X))},ze.\u0275cmp=I.Db({type:ze,selectors:[["app-create-edit-project-activity-review"]],inputs:{data:"data"},features:[I.wb],decls:35,vars:16,consts:[[3,"appScrollTracker"],["color","primary"],["slot","start"],["fill","solid","color","dark",3,"click"],["slot","end"],["lines","none","color","primary","scrollEvents","true"],["scrollArea",""],[3,"title","info"],["slot","fixed","vertical","bottom","horizontal","end"],["color","dark",3,"click"],[3,"src"],["color","primary","lines","none",3,"formGroup","ngSubmit"],["color","secondary"],["color","secondary","lines","none"],["slot","start",3,"src"],["lines","none","color","light"],["lines","none","color","light",4,"ngIf"],["rows","5","autocomplete","off","formControlName","reviewerComment","type","text",3,"placeholder"],["color","warning",4,"ngIf"],["id","dum-height"],["color","primary",3,"ngModel","ngModelOptions","ngModelChange","ionChange"],["formControlName","achievedResultValue","color","primary","step","1",3,"min","max",4,"ngIf"],[1,"percentage"],["formControlName","achievedResultValue","color","primary","step","1",3,"min","max"],["color","warning"],["color","danger","slot","start",3,"src"]],template:function(e,t){if(1&e&&(I.Ob(0,"ion-header",0),I.Ob(1,"ion-toolbar",1),I.Ob(2,"ion-title"),I.lc(3),I.Nb(),I.Ob(4,"ion-buttons",2),I.Ob(5,"ion-button",3),I.Wb("click",function(){return t.cancelModal()}),I.lc(6),I.Nb(),I.Nb(),I.Ob(7,"ion-buttons",4),I.Ob(8,"ion-button",3),I.Wb("click",function(){return t.submit()}),I.lc(9),I.Nb(),I.Nb(),I.Nb(),I.Nb(),I.Ob(10,"ion-content",5,6),I.Kb(12,"app-page-info-title",7),I.Ob(13,"ion-fab",8),I.Ob(14,"ion-fab-button",9),I.Wb("click",function(){return t.submit()}),I.Kb(15,"ion-icon",10),I.Nb(),I.Nb(),I.Ob(16,"form",11),I.Wb("ngSubmit",function(){return t.submit()}),I.Ob(17,"ion-card",12),I.Ob(18,"p"),I.Ob(19,"ion-item",13),I.Kb(20,"ion-icon",14),I.lc(21),I.Nb(),I.Nb(),I.Ob(22,"ion-card",15),I.kc(23,Se,6,5,"ion-item",16),I.kc(24,Me,7,4,"ion-item",16),I.Nb(),I.Nb(),I.Ob(25,"ion-card",12),I.Ob(26,"p"),I.Ob(27,"ion-item",13),I.Kb(28,"ion-icon",14),I.lc(29),I.Nb(),I.Nb(),I.Ob(30,"ion-card",15),I.Ob(31,"ion-item",15),I.Kb(32,"ion-textarea",17),I.Nb(),I.kc(33,xe,4,2,"ion-card",18),I.Nb(),I.Nb(),I.Nb(),I.Kb(34,"div",19),I.Nb()),2&e){var i=I.fc(11);I.bc("appScrollTracker",i),I.zb(3),I.nc(" ",t.stringKey.UPDATE_REVIEW," "),I.zb(3),I.mc(t.stringKey.CANCEL),I.zb(3),I.mc(t.stringKey.SAVE),I.zb(3),I.bc("title",t.stringKey.UPDATE_REVIEW)("info",t.stringKey.REVIEW_INFO),I.zb(3),I.bc("src",t.stringKey.ICON_SAVE),I.zb(1),I.bc("formGroup",t.formGroup),I.zb(4),I.bc("src",t.stringKey.ICON_SLIDER),I.zb(1),I.nc(" ",t.stringKey.FORM_INFO_REVIEWER_ACTIVITY_ACHIEVED_FACT," "),I.zb(2),I.bc("ngIf",t.passedActivityReview.activityMeasurementType==t.activityMeasurementTypeEnum.Bool),I.zb(1),I.bc("ngIf",t.passedActivityReview.activityMeasurementType==t.activityMeasurementTypeEnum.Num),I.zb(4),I.bc("src",t.stringKey.ICON_CREATE),I.zb(1),I.nc(" ",t.stringKey.FORM_INFO_ACTIVITY_REVIEW_COMMENT," "),I.zb(3),I.bc("placeholder",t.stringKey.FORM_PLACEHOLDER_COMMENT),I.zb(1),I.bc("ngIf",t.reviewerComment.invalid&&t.reviewerComment.touched)}},directives:[h.u,B.a,h.Q,h.O,h.k,h.j,h.o,W.a,h.q,h.r,h.v,J.m,J.h,J.c,h.l,h.x,p.j,h.N,h.cb,J.g,J.b,h.y,h.P,h.d,J.j,h.E,h.bb],styles:[""]}),ze);function je(e,t){if(1&e&&I.Kb(0,"app-no-data",3),2&e){var i=I.Yb();I.bc("reviewer",!0)("text",i.stringKey.NO_DATA_PROJECT_REVIEWER)}}function Ue(e,t){if(1&e&&I.Kb(0,"app-custom-fields",10),2&e){var i=I.Yb().$implicit,r=I.Yb(2);I.bc("data",r.showResult(i))}}function Pe(e,t){if(1&e&&(I.Ob(0,"ion-card"),I.Kb(1,"app-work-progress",11),I.Nb()),2&e){var i=I.Yb().$implicit;I.zb(1),I.bc("activity",i)("resultValue",i.achievedResultValue)}}function Le(e,t){1&e&&I.Kb(0,"app-custom-fields",12),2&e&&I.bc("noData",!0)}function Ye(e,t){if(1&e&&I.Kb(0,"app-custom-fields",10),2&e){var i=I.Yb().$implicit;I.bc("data",i.reviewerComment)}}function He(e,t){1&e&&I.Kb(0,"app-custom-fields",12),2&e&&I.bc("noData",!0)}function Ge(e,t){if(1&e){var i=I.Pb();I.Ob(0,"div"),I.Ob(1,"app-panel-header",5),I.Wb("event",function(){I.gc(i);var e=t.$implicit;return I.Yb(2).openReviewerOptions(e)}),I.Nb(),I.Ob(2,"ion-grid"),I.Ob(3,"ion-row"),I.Ob(4,"ion-col",6),I.Ob(5,"ion-card"),I.Kb(6,"app-panel-header",0),I.kc(7,Ue,1,1,"app-custom-fields",7),I.kc(8,Pe,2,2,"ion-card",2),I.kc(9,Le,1,1,"app-custom-fields",8),I.Nb(),I.Nb(),I.Ob(10,"ion-col",9),I.Ob(11,"ion-card"),I.Kb(12,"app-panel-header",0),I.kc(13,Ye,1,1,"app-custom-fields",7),I.kc(14,He,1,1,"app-custom-fields",8),I.Nb(),I.Nb(),I.Nb(),I.Nb(),I.Nb()}if(2&e){var r=t.$implicit,n=I.Yb(2);I.zb(1),I.bc("panelTitle",n.getUserFullName(r.reviewerUserFirstName,r.reviewerUserLastName))("panelIcon",n.stringKey.ICON_REVIEWER)("panelColor",n.stringKey.COLOR_LIGHT)("eventIcon",n.stringKey.ICON_MORE)("isEventRequired",!0),I.zb(5),I.bc("panelTitle",n.stringKey.VERIFIED_RESULT)("panelIcon",n.stringKey.ICON_VERIFIED_RESULT)("panelColor",n.stringKey.COLOR_LIGHT),I.zb(1),I.bc("ngIf",r.achievedResultValue),I.zb(1),I.bc("ngIf",r.achievedResultValue),I.zb(1),I.bc("ngIf",!r.achievedResultValue),I.zb(3),I.bc("panelTitle",n.stringKey.REVIEWER_COMMENT)("panelIcon",n.stringKey.ICON_COMMENT)("panelColor",n.stringKey.COLOR_LIGHT),I.zb(1),I.bc("ngIf",r.reviewerComment),I.zb(1),I.bc("ngIf",!r.reviewerComment)}}function Fe(e,t){if(1&e&&(I.Ob(0,"div"),I.kc(1,Ge,15,16,"div",4),I.Nb()),2&e){var i=I.Yb();I.zb(1),I.bc("ngForOf",i.activityReviews)}}var Be,We=((Be=function(t){r(o,t);var n=a(o);function o(e,t,i,r,a){var c;return s(this,o),(c=n.call(this,e)).localStorageService=t,c.loadingService=i,c.projectActivityReviewerService=r,c.alertService=a,c.hasData=!1,c.event=new I.o,c}return i(o,[{key:"ngOnInit",value:function(){this.activeUserId(),this._projectId=this.activatedRoute.snapshot.paramMap.get("projectId"),this._activityId=this.activatedRoute.snapshot.paramMap.get("activityId")}},{key:"ngOnDestroy",value:function(){e(c(o.prototype),"ngOnDestroy",this).call(this)}},{key:"activeUserId",value:function(){return Object(k.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.localStorageService.getActiveUserId().pipe(Object(M.a)(this.unsubscribe)).subscribe(function(e){t._loggedInUser=e});case 1:case"end":return e.stop()}},e,this)}))}},{key:"showResult",value:function(e){return e.activityMeasurementType==ne.a.Bool?this.stringKey.ACHIEVED:"".concat(e.achievedResultValue.toString()," ").concat(e.activityResultType)}},{key:"openReviewerOptions",value:function(e){return Object(k.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var i,r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.actionSheetController.create({header:this.stringKey.CHOOSE_YOUR_ACTION,buttons:[{text:this.stringKey.UPDATE+" "+this.stringKey.REVIEWER_COMMENT,icon:this.stringKey.ICON_EDIT,handler:function(){r.addEditReview(e)}},{text:this.stringKey.DELETE+" "+this.stringKey.REVIEWER,icon:this.stringKey.ICON_DELETE,handler:function(){r.delete(e)}},{text:this.stringKey.CANCEL,icon:this.stringKey.ICON_CANCEL,handler:function(){}}]});case 2:return i=t.sent,t.next=5,i.present();case 5:case"end":return t.stop()}},t,this)}))}},{key:"addEditReview",value:function(e){return Object(k.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var i,r,n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this._loggedInUser!=e.reviewerUserId){t.next=9;break}return i={userId:this._loggedInUser,projectId:this._projectId,activityId:this._activityId,activityReviewId:e.activityReviewId,achievedResultValue:e.achievedResultValue,reviewerUserId:e.reviewerUserId,reviewerComment:e.reviewerComment,activityMeasurementType:e.activityMeasurementType,activityResultType:e.activityResultType,criteriaPoorValue:e.criteriaPoorValue,criteriaOutstandingValue:e.criteriaOutstandingValue,characteristicsHigherBetter:e.characteristicsHigherBetter,operationType:"".concat(S.a.Edit)},t.next=4,this.modalController.create({component:Ve,componentProps:{data:i}});case 4:return(r=t.sent).onDidDismiss().then(function(e){n._modalData=e.data,n._modalData.cancelled||n.event.emit()}),t.next=8,r.present();case 8:return t.abrupt("return",t.sent);case 9:this.alertService.presentBasicAlert(this.stringKey.ALERT_NO_SAME_REVIEWER);case 10:case"end":return t.stop()}},t,this)}))}},{key:"delete",value:function(e){return Object(k.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var i,r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.alertController.create({header:this.stringKey.CONFIRM_ACTION,message:this.stringKey.ALERT_DELETE,buttons:[{text:this.stringKey.CANCEL,handler:function(){}},{text:this.stringKey.YES,handler:function(){return Object(k.a)(r,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.deleteReviewer(e);case 2:case"end":return t.stop()}},t,this)}))}}]});case 2:return i=t.sent,t.next=5,i.present();case 5:case"end":return t.stop()}},t,this)}))}},{key:"deleteReviewer",value:function(e){return Object(k.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var i=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.loadingService.present("".concat(this.stringKey.API_REQUEST_MESSAGE_6)),this.projectActivityReviewerService.projectActivityReviewerCrud({userId:this._loggedInUser,projectId:this._projectId,activityId:this._activityId,activityReviewId:e.activityReviewId,reviewerUserId:e.reviewerUserId,operationType:S.a.Delete}).pipe(Object(M.a)(this.unsubscribe)).subscribe(function(e){return Object(k.a)(i,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadingService.dismiss();case 2:if(t.t0=e.success,!t.t0){t.next=7;break}return t.next=6,this.presentToast(e.message);case 6:this.event.emit();case 7:case"end":return t.stop()}},t,this)}))},function(e){return Object(k.a)(i,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadingService.dismiss();case 2:case"end":return e.stop()}},e,this)}))});case 1:case"end":return t.stop()}},t,this)}))}}]),o}(K.a)).\u0275fac=function(e){return new(e||Be)(I.Jb(I.t),I.Jb(Y.a),I.Jb(F.a),I.Jb(G),I.Jb(V.a))},Be.\u0275cmp=I.Db({type:Be,selectors:[["app-reviewer-review"]],inputs:{activityReviews:"activityReviews",hasData:"hasData",allowAction:"allowAction"},outputs:{event:"event"},features:[I.wb],decls:4,vars:5,consts:[[3,"panelTitle","panelIcon","panelColor"],[3,"reviewer","text",4,"ngIf"],[4,"ngIf"],[3,"reviewer","text"],[4,"ngFor","ngForOf"],[3,"panelTitle","panelIcon","panelColor","eventIcon","isEventRequired","event"],["size-lg","4","size-md","4","size-sm","4","size","12"],[3,"data",4,"ngIf"],[3,"noData",4,"ngIf"],["size-lg","8","size-md","8","size-sm","8","size","12"],[3,"data"],[3,"activity","resultValue"],[3,"noData"]],template:function(e,t){1&e&&(I.Ob(0,"ion-card"),I.Kb(1,"app-panel-header",0),I.kc(2,je,1,2,"app-no-data",1),I.kc(3,Fe,2,1,"div",2),I.Nb()),2&e&&(I.zb(1),I.bc("panelTitle",t.stringKey.REVIEW_DETAILS)("panelIcon",t.stringKey.ICON_ACTIVITY_REVIEW)("panelColor",t.stringKey.COLOR_MEDIUM),I.zb(1),I.bc("ngIf",!t.hasData),I.zb(1),I.bc("ngIf",t.hasData))},directives:[h.l,q.a,p.j,ce.a,p.i,h.t,h.I,h.n,Q.a,Re.a],styles:[""]}),Be);function Je(e,t){if(1&e&&I.Kb(0,"app-no-data",15),2&e){var i=I.Yb();I.bc("credibility",!0)("text",i.stringKey.NO_DATA_CREDIBILITY)}}function qe(e,t){if(1&e){var i=I.Pb();I.Mb(0),I.Ob(1,"app-panel-header",16),I.Wb("click",function(){I.gc(i);var e=I.Yb();return e.editProjectActivity(e.activity)}),I.Nb(),I.Ob(2,"ion-grid"),I.Ob(3,"ion-row"),I.Ob(4,"ion-col",17),I.Ob(5,"ion-card"),I.Kb(6,"app-panel-header",18),I.Kb(7,"app-custom-fields",19),I.Nb(),I.Nb(),I.Ob(8,"ion-col",17),I.Ob(9,"ion-card"),I.Kb(10,"app-panel-header",20),I.Kb(11,"app-custom-fields",19),I.Nb(),I.Nb(),I.Ob(12,"ion-col",21),I.Kb(13,"app-measurement-scale",22),I.Nb(),I.Ob(14,"ion-col",21),I.Ob(15,"app-assignee-self-review",23),I.Wb("event",function(){return I.gc(i),I.Yb().loadData()}),I.Nb(),I.Nb(),I.Ob(16,"ion-col",21),I.Ob(17,"app-reviewer-review",24),I.Wb("event",function(){return I.gc(i),I.Yb().loadData()}),I.Nb(),I.Nb(),I.Nb(),I.Nb(),I.Lb()}if(2&e){var r=I.Yb();I.zb(1),I.bc("panelTitle",r.activity.activityName)("panelIcon",r.stringKey.ICON_ACTIVITY)("panelColor",r.stringKey.COLOR_SECONDARY)("eventIcon",r.stringKey.ICON_EDIT)("isEventRequired",!0),I.zb(5),I.bc("panelTitle",r.stringKey.MEASUREMENT_TYPE)("panelIcon",r.stringKey.ICON_RESULT)("panelColor",r.stringKey.COLOR_MEDIUM),I.zb(1),I.bc("data",r.activity.activityResultType),I.zb(3),I.bc("panelTitle",r.stringKey.WEIGHT_IN_P)("panelIcon",r.stringKey.ICON_WEIGHT)("panelColor",r.stringKey.COLOR_MEDIUM),I.zb(1),I.bc("data",r.activity.activityWeight.toString()),I.zb(2),I.bc("activity",r.activity),I.zb(2),I.bc("activity",r.activity)("allowAction",!0),I.zb(2),I.bc("activityReviews",r.activityReviews)("hasData",r.hasReviewsData)("allowAction",!0)}}var Qe,Xe,$e=[{path:"",component:(Qe=function(t){r(o,t);var n=a(o);function o(e,t,i,r){var a;return s(this,o),(a=n.call(this,e)).localStorageService=t,a.projectActivityService=i,a.loadingService=r,a._hasData=!1,a._hasReviewsData=!1,a.activityMeasurementTypeEnum=ne.a,a}return i(o,[{key:"breadCrumb",get:function(){return this._breadCrumb},set:function(e){this._breadCrumb=e}},{key:"hasData",get:function(){return this._hasData},set:function(e){this._hasData=e}},{key:"activity",get:function(){return this._activity},set:function(e){this._activity=e}},{key:"activityReviews",get:function(){return this._activityReviews},set:function(e){this._activityReviews=e}},{key:"hasReviewsData",get:function(){return this._hasReviewsData},set:function(e){this._hasReviewsData=e}},{key:"activeUserId",value:function(){return Object(k.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.localStorageService.getActiveUserId().pipe(Object(M.a)(this.unsubscribe)).subscribe(function(e){t._loggedInUser=e});case 1:case"end":return e.stop()}},e,this)}))}},{key:"ngOnInit",value:function(){this.activeUserId(),this._projectId=this.activatedRoute.snapshot.paramMap.get("projectId"),this._activityId=this.activatedRoute.snapshot.paramMap.get("activityId")}},{key:"ionViewDidEnter",value:function(){this.loadData()}},{key:"ngOnDestroy",value:function(){e(c(o.prototype),"ngOnDestroy",this).call(this)}},{key:"loadData",value:function(){return Object(k.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadingService.present("".concat(D.a.API_REQUEST_MESSAGE_1)),this.projectActivityService.getProjectActivityDetails({projectId:this._projectId,userId:this._loggedInUser,activityId:this._activityId}).pipe(Object(M.a)(this.unsubscribe)).subscribe(function(e){return Object(k.a)(t,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadingService.dismiss();case 2:if(t.t0=e.success,!t.t0){t.next=10;break}return this._projectActivityModel=e.data,this._hasData=!0,t.next=8,this.generateBreadcrumb();case 8:this._activity=this._projectActivityModel.activityDetails,this._projectActivityModel.reviewDetails.success?(this._activityReviews=this._projectActivityModel.reviewDetails.data,this._hasReviewsData=!0):this._hasReviewsData=!1;case 10:case"end":return t.stop()}},t,this)}))});case 1:case"end":return e.stop()}},e,this)}))}},{key:"generateBreadcrumb",value:function(){var e;return Object(k.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=null===(e=this._projectActivityModel.projectDetails)||void 0===e?void 0:e.projectName,this._breadCrumb=[i,this.stringKey.PROJECT_ACTIVITY];case 2:case"end":return t.stop()}},t,this)}))}},{key:"editProjectActivity",value:function(e){return Object(k.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var i,r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.userId=this._loggedInUser,e.projectId=this._projectId,e.operationType=S.a.Edit,t.next=3,this.modalController.create({component:ae.a,componentProps:{data:e}});case 3:return(i=t.sent).onDidDismiss().then(function(e){r._modalData=e.data,r._modalData.cancelled||r.loadData()}),t.next=7,i.present();case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}},t,this)}))}},{key:"addReviewer",value:function(){return Object(k.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,i,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={userId:this._loggedInUser,projectId:this._projectId,activityId:this._activityId,operationType:"".concat(S.a.Create)},e.next=3,this.modalController.create({component:re,componentProps:{data:t}});case 3:return(i=e.sent).onDidDismiss().then(function(e){r._modalData=e.data,r._modalData.cancelled||r.loadData()}),e.next=7,i.present();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e,this)}))}}]),o}(K.a),Qe.\u0275fac=function(e){return new(e||Qe)(I.Jb(I.t),I.Jb(Y.a),I.Jb(oe.a),I.Jb(F.a))},Qe.\u0275cmp=I.Db({type:Qe,selectors:[["project-users"]],features:[I.wb],decls:20,vars:8,consts:[[3,"appScrollTracker"],["color","primary"],["slot","start"],["slot","end",3,"click"],["slot","start",3,"src"],["scrollEvents","true"],["scrollArea",""],[3,"title","info"],["slot","fixed",3,"ionRefresh"],["slot","fixed","vertical","bottom","horizontal","end"],["color","dark",3,"click"],[3,"src"],[3,"credibility","text",4,"ngIf"],[4,"ngIf"],["id","dum-height"],[3,"credibility","text"],[3,"panelTitle","panelIcon","panelColor","eventIcon","isEventRequired","click"],["size-lg","6","size-md","6","size-sm","6","size","12"],[3,"panelTitle","panelIcon","panelColor"],[3,"data"],["eventIcon","stringKey.ICON_MORE",3,"panelTitle","panelIcon","panelColor"],["size-lg","12","size-md","12","size-sm","12","size","12"],[3,"activity"],[3,"activity","allowAction","event"],[3,"activityReviews","hasData","allowAction","event"]],template:function(e,t){if(1&e&&(I.Ob(0,"ion-header",0),I.Ob(1,"ion-toolbar",1),I.Ob(2,"ion-title"),I.lc(3),I.Nb(),I.Ob(4,"ion-buttons",2),I.Kb(5,"ion-menu-button"),I.Kb(6,"ion-back-button"),I.Nb(),I.Ob(7,"ion-buttons",3),I.Wb("click",function(){return t.loadData()}),I.Kb(8,"ion-icon",4),I.Nb(),I.Nb(),I.Nb(),I.Ob(9,"ion-content",5,6),I.Kb(11,"app-page-info-title",7),I.Ob(12,"ion-refresher",8),I.Wb("ionRefresh",function(e){return t.doRefresh(e)}),I.Kb(13,"ion-refresher-content"),I.Nb(),I.Ob(14,"ion-fab",9),I.Ob(15,"ion-fab-button",10),I.Wb("click",function(){return t.addReviewer()}),I.Kb(16,"ion-icon",11),I.Nb(),I.Nb(),I.kc(17,Je,1,2,"app-no-data",12),I.kc(18,qe,18,19,"ng-container",13),I.Kb(19,"div",14),I.Nb()),2&e){var i=I.fc(10);I.bc("appScrollTracker",i),I.zb(3),I.nc(" ",t.stringKey.ACTIVITY_REVIEW," "),I.zb(5),I.bc("src",t.stringKey.ICON_REFRESH),I.zb(3),I.bc("title",t.stringKey.ACTIVITY_REVIEW)("info",t.stringKey.ACTIVITY_REVIEW_INFO),I.zb(5),I.bc("src",t.stringKey.ICON_ADD),I.zb(1),I.bc("ngIf",!t.hasData),I.zb(1),I.bc("ngIf",t.hasData)}},directives:[h.u,B.a,h.Q,h.O,h.k,h.B,h.h,h.i,h.v,h.o,W.a,h.F,h.G,h.q,h.r,p.j,ce.a,q.a,h.t,h.I,h.n,h.l,Q.a,de,Ce,We],styles:[""]}),Qe)}],Ze=((Xe=function e(){s(this,e)}).\u0275fac=function(e){return new(e||Xe)},Xe.\u0275mod=I.Hb({type:Xe}),Xe.\u0275inj=I.Gb({imports:[[p.b,h.R,g.a,_,m.a,E.a,C,N.a,O.a,R.a,T.a,f.a,y.a,v.k.forChild($e)]]}),Xe)}}])}();